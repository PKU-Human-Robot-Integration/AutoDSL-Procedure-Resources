{
  "id": 9360,
  "origin_website": "Jove",
  "title": "Long-term Behavioral Tracking of Freely Swimming Weakly Electric Fish",
  "procedures": [
    "This procedure meets the requirements of the University of Ottawa Animal Care Committee. No conflict of interest is declared. Please refer to the Table of Materials and Reagents for the makes and models of the equipment and materials listed below. Custom written Spike2 and MATLAB scripts, and sample data are provided in the Supplemental File.\n1. Aquarium Tank and Isolation Chamber Setup\nAnti-vibration floor. Construct an anti-vibration surface (2.1 m x 2.1 m) by stacking rubber pads, acoustic Styrofoam, marine plywood panel, and polyurethane foam pads from the bottom to the top (Figure 1A). Lay four wooden studs (5 cm x 10 cm) on the plywood panel to support the edges of the aquarium tank.\nFloor heater. Lay an electrically shielded heating element over thermally graded foam padding (see Figure 1D bottom). Cover the heating element with a metallic mesh for electrical shielding.\nSpatial tank. Construct a wide and shallow aquarium tank (1.8 m x 1.8 m x 30 cm) using 1.3 cm thick tempered glass panels, L-shaped aluminum frame and aquarium-grade silicone (see Figure 1A). Cover the underside of the tank with a large sheet of white background to provide high imaging contrast (see Protocol 3).\nDivide the aquarium tank into a central arena (1.5 m diameter) and four corner compartments (see Figure 1B) by installing walls (22.5 cm tall) made of acrylic sheets (matte white, 0.64 cm thick).\n\t\nBend four acrylic sheets (22.5 cm x 102.7 cm) by applying heat to create four curved wall sections, and attach them to the tank bottom using silicone caulk to separate the central arena from the four corner compartments. Leave 20 cm space between the curved sections for the gate installation.",
    "Separate neighboring corner compartments by installing four double walls with 15 cm gaps, which provide extra electrical isolation and places for underwater sensors such as a hydrophone.\nAssemble four motorized gates, and install them between the corner compartments and the central arena.\n\t\nAssemble four door frames as shown in Figure 1C. Create six wells (0.64 cm deep) on each door frame, embed nylon acorn nuts (0.64 cm diameter thread) and secure them with epoxy.\nCut four door panels from acrylic and rubber sheets, and create six holes (0.64 cm diameter) on the acrylic and rubber panels for the locking mechanism. Join the acrylic and rubber panels using silicone caulking.\nInstall acrylic hinges to join the door panels with the door frames.\nMount swinging arms on servomotors, and install them on the top of the door frames (see Figure 1C). Make loops with cable ties to link the swinging arms to the door panels.\nPosition the gate assemblies on the gaps created between the curved wall sections, and secure them using silicone caulking.\nConnect all servomotors to a servo controller, and connect it to a power source and a computer via an active USB extension cable. Test the gates using control software supplied with the servo controller.\nAfter the silicone hardens, check for watertightness by locking all gates with nylon screws and filling one compartment at a time.\nIsolation chamber. Construct an isolation chamber to surround the aquarium and block external sources of light, sound and electrical noise (see Figure 1D).",
    "Make three wall panels (2 m x 2 m x 5 cm) and four door panels (1.9 m x 0.95 m x 5 cm). For each panel, join aluminum moldings (5 cm x 2.5 cm) to create a rectangular frame; and rivet a white corrugated plastic panel on the aluminum frame. Fill acoustic fiberglass batts in the panels, and close with a black corrugated plastic panel.\nInstall three wall panels on the anti-vibration floor, and install piano hinges to join the four door panels on the wall panels.\nSurround the isolation chamber with aluminum meshes, and ground meshes on all sides to create a Faraday cage.\nHumidity control. Install a low-noise exhaust fan (Figure 1F top) to remove excess humidity build-up from heating. Place the exhaust fan at least 2 m away from the recording site, and install an air duct between the isolation chamber and the exhaust fan.\nRoutinely monitor and maintain the conditions of the tank water and animals.\n\t\nMaintain constant water conditions at 10 cm depth, 100 µS/cm conductivity and pH 7.0 by adding water or salt stock solution (refer to Knudsen33 for the recipe). Add a bag of crushed coral if the pH drops below 6.5.\nInstall vertical aquarium filters which can operate from shallow water for cleaning and aerating purposes (Figure 1F bottom). Disconnect the filters and take them out of the central arena during recording sessions.\nDeliver live mealworms on the bottom of the tank by attaching them on suction cups with elastics. Avoid free-floating preys such as blackworms to prevent uncontrolled feeding of stray preys during recording.\n2. EOD Tracking\nElectrodes installation. Assemble eight graphite electrodes, and space them equally on the curved wall of the central arena.",
    "Obtain drawing leads (15 cm in length; Mars Carbon 2 mm type HB) and shave off the outer coating of the leads.\nCut eight 10 cm segments of coaxial cable (RG-174), wrap the cable core around one end of the graphite rods, and apply heat-shrink tubing over them for strong and stable electrical connection. Attach BNC jack connectors on the opposite ends (Figure 2A left).\nPosition the electrodes on the wall by taping, and apply thin strips of masking tape on the electrode surfaces to protect from silicone. Apply silicone caulking to permanently hold the electrodes, and remove all tape before the silicone hardens (Figure 2A right).\nBuild eight cable assemblies by measuring the distance from each electrode to the amplifier unit, and cutting coaxial cables (RG-54) in lengths. Attach BNC plug connectors on both ends of the cables.\nUse the cable assemblies to wire all electrodes to the amplifier unit. Differentially amplify by pairing two 90° oriented electrodes (see Figure 2B), and ground all coaxial shielding wires by connecting them to the Faraday cage.\nSet the amplifier gain below the signal saturation limit, and apply a band-pass filter (200 Hz-5 kHz) to remove noise. Digitize the four recording electrode pairs at 40 kS/sec.\nOnline signal processing. The instructions are written for the Spike2 software, and the parameter settings are optimized for Gymnotus sp. (see Figure 2C for summary).\n\t\nAdd a DC remove process (τ = 0.1 sec) to all recording channels.\nAdd a rectify process to all recordings channels.\nCreate a virtual channel by summing all four recording channels.\nExtract a unimodal envelope per EOD pulse by adding a RMS (root-mean-squared, imgsrc://cloudfront.jove.com/files/ftp_upload/50962/50962_clip_image002.gif ) process (τ = 0.25 msec) to the virtual channel, for generating a single peak per EOD cycle to unambiguously determine the pulse timing.",
    "Create a realmark channel from the virtual channel and record the time and values of the peak amplitudes, after setting an appropriate threshold to capture all EOD pulses without missing a pulse, while avoiding false positives.\nMonitor the instantaneous EOD rate in real-time by setting the channel display option of the realmark channel to an instantaneous frequency mode.\nMonitor the fish movement in real-time by duplicating the realmark channel, and set the display option to a waveform mode.\nQuantify an activity level from the RMS of the EOD amplitude slope by creating a virtual channel from the realmark channel (0.01 sec sampling period), and add slope (τ = 0.25 msec) and RMS (τ = 0.5 msec) processes.\nExport the realmark channel in the Spike2 software to the MATLAB format.\n3. Synchronized Video Tracking\nCreate a background scene.\n\t\nHide any object that casts a reflection on the water surface by covering with matte white countertop film.\nInstall a matte white corrugated plastic panel 15 cm below the ceiling to hide the camera and the air vent.\nPrint grid patterns on a large sheet of white paper for calibrating a camera, and lay it underneath the tank to provide a high-contrast background.\nInstall light sources.\n\t\nObtain IR LED lights and, remove built-in fans to reduce noise. Drive the LED with a current-regulated DC power supply placed outside of the Faraday cage.\nInstall IR LED lights for imaging in darkness, and white LED lights for driving a diurnal light cycle in the test fish. Direct all light sources toward the ceiling to achieve indirect and uniform illumination (Figure 3A).\nRegulate the diurnal light cycle by driving the white LED lights with a timer-controlled switch (e.g. 12 hr on/12 hr off).\nInstall a camera directly above the aquarium.",
    "Obtain a NIR-sensitive camera, or remove an IR blocking filter by breaking a thin sheet of tinted glass at the back of the lens assembly. Make sure the viewing angle is wide enough to image the whole central arena.\nMake a small viewing hole in the middle of the ceiling panel, and place the camera directly above the hole.\nInstall a white ring guard around the lens if the light sources generate glares.\nMake a time-synchronized video recording.\n\t\nPlace an IR LED at one of the four tank corners to generate time synchronization pulses (1 msec duration, 10 sec period). Add a load-limiting resistor (1 kΩ) in series, and drive the IR LED from a digital output port of the digitizer hardware.\nUse video recording software bundled with the camera if available. Select the highest recording quality (e.g. lossless compression) and the highest resolutions supported.\nStart the video recording immediately before starting the EOD recording, and stop the video recording immediately after the EOD recording.\nAfter the recording, convert the image frame numbers to the digitizer time unit by linearly interpolating between the first and the last light pulses captured by the signal digitizer and the video recording.\nAutomated image tracking\n\tThe instructions are written for the MATLAB Image processing toolbox, and make use of its functions. A custom MATLAB script is provided with this submission for automated image tracking. \n\t\nImport video. Import a video recording file directly to the MATLAB workspace using \"Videoreader.read\" function.\nCreate a composite background image by combining two image frames. Replace the image region occupied by an animal with an unoccupied image of the same region from another frame (see Figure 3B).",
    "Specify an image region to track by drawing a circular mask around the central arena to exclude the area outside (Figure 3B bottom), and multiply by a constant (rint) to set a minimum threshold for intensity difference. For example, setting rint = 0.85 will suppress the intensity fluctuations 15% = (1 - rint) below the background.\nImage subtraction. Subtract an image frame (=IMk) from the background image (=IM­0) to obtain the difference image (=ΔIMk). Use unsigned integer numerical precision to store the image intensity values as non-negative integers.\nSegment the difference image by applying an intensity threshold determined from the graythresh function. Clean the binary image using the bwmorph function, and select the largest blob corresponding to an animal after calculating all blob areas using the regionprops function.\nDetermine the centroid and major orientation axis of the largest blob by applying the regionprops function, and rotate the image to align the major axis with the x-axis. Divide the image to the head and tail parts at the centroid (Figure 3D top).\nDetermine the major axis of the head part, and rotate the entire image to align with the x-axis (Figure 3D bottom left). Fit bounding-boxes around the head and tail parts parallel to their major axes using the regionprops function.\nDetermine the median y-coordinates of the blob at the left, center and right vertical edges of the bounding boxes (green dots in Figure 3D bottom); and assign them to five feature points (head-tip, mid-head, mid-body, mid-tail, tail-tip).\nProcess successive frames after cropping an image frame centered at the animal's centroid determined from its previous frame.",
    "Manually assign the head orientation for the first frame, and use a dot-product between the orientation vectors from two successive frames to automatically determine the head orientation. Inspect the result, and manually flip the head orientation if incorrectly assigned.\nPlot an animal trajectory by joining the head-tips, and smooth using median and average filters (n=3) if it has a jittery appearance. Superimpose the trajectory with a background image, and interpolate fish midlines using the five feature points (see Figure 2E).\nCompute the average EOD rate at each image capture time by resampling the instantaneous EOD rate (100 Hz sampling rate) and averaging (0.0625 sec time window). Plot the trajectory in pseudo-colors determined from the time-matched EOD rate, and superimpose with a background image (see Figure 2F).\nSubscription Required. Please recommend JoVE to your librarian."
  ],
  "subjectAreas": [
    "Neuroscience"
  ],
  "bigAreas": [
    "Biomedical & Clinical Research"
  ]
}