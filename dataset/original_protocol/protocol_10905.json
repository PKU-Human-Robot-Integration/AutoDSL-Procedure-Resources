{
  "id": 11316,
  "origin_website": "Jove",
  "title": "Using the FishSim Animation Toolchain to Investigate Fish Behavior: A Case Study on Mate-Choice Copying In Sailfin Mollies",
  "procedures": [
    "The performed experiments and handling of the fish were in line with the German Animal Welfare legislation (Deutsches Tierschutzgesetz), and approved by the internal animal welfare officer Dr. Urs Gießelmann, University of Siegen, and the regional authorities (Kreisveterinäramt Siegen-Wittgenstein; Permit number: 53.6 55-05).\n1. Virtual Fish Design\nNote: Find a list of the required hardware and software in the supplementary materials list. A detailed description of the general functionality of FishSim and additional tips and tricks can be found in the User Manual (https://bitbucket.org/EZLS/fish_animation_toolchain/).\nPreparation of female body textures with and without gravid spot\nStart GIMP and click File >> Open to open the female body texture image “PLF_body_6. png” from the folder models in the directory “fishsim_animation_toolchain”. Use this picture as a reference for all new created female body textures with gravid spot. Select the dark gravid spot area of the reference picture with the free select tool and cut it (click Edit >> Cut).\nNote: GIMP (available at www.gimp.org) is a free picture editing tool, similar to Adobe Photoshop, which can be used to manipulate digital pictures and graphics.\nOpen a second female body texture file in GIMP (e.g., “PLF_body_7.png”) and transfer the spot area onto the second body texture by inserting (Edit >> Paste Into) the prior cut spot area as a new floating layer. Adjust the position of the gravid spot in the second picture and merge layers by clicking Layer >> Anchor Layer.\nNote: Ensure that the area of the gravid spot has the same size and identical position on each virtual model female (Figure 2)!\nExport (Edit >> Export As) the new “spot” texture under a new name (e.g., PLF_body_7_S. png) in the models folder. Close all open picture windows in GIMP.",
    "Note: Do not make any other changes (e.g., scaling) to the texture files since they are specifically edited to be later mapped onto the 3D fish.\nCreate a second body texture without a gravid spot, using the same original female body texture file a second time (e.g., “PLF_body_7.png”). Now, cover already existing gravid spots in the original file with the help of GIMP.\nOpen the female body texture in GIMP and select the clone tool. Select the pattern of the surrounding abdominal area (without dark pigmentation) by pressing Ctrl + left-click and use this selection to cover existing dark pigmentation by painting over it with the clone tool (Figure 2).\nExport the newly created “no spot” texture under a new name (e.g., PLF_body_7_NS.png) in the models folder. Close GIMP.\nimgsrc://cloudfront.jove.com/files/ftp_upload/58435/58435fig2.jpg\nFigure 2: Exemplar pictures of female body textures prior to (original) and after manipulation for the \"spot\" and \"no spot\" treatment using the picture editing tool GIMP. The dotted circle marks the area that was manipulated. Please click here to view a larger version of this figure.[href=https://www.jove.com/files/ftp_upload/58435/58435fig2large.jpg]\nAdjusting the viewpoint and setting the “scene” for animation\nStart FishSim by selecting the FishSim icon in the launcher on the left side of the desktop. Configure the resolution for the presentation monitors and click Launch.\nNote: It is recommended to make the following adjustments (steps 1.2.2‒1.2.4) on screen of one of the presentation monitors (if monitor dimensions and resolutions differ).\nPress F1 on the keyboard to change from viewing mode to editing mode (toggle between viewing and editing mode by repeatedly pressing F1).\nNote: Switching to editing mode enables the editing toolbar at the top of the window. The scene as seen in the viewing mode depicts what will be presented on screen during the experiments.",
    "Adjust the viewpoint to match the dimensions of the presentation monitors by adjusting the camera angle. Rotate the camera by holding the left mouse button and move the cursor. Pan the camera by holding the right mouse button and moving the cursor. Zoom in and out by holding the middle mouse (or both mouse buttons) and moving the cursor.\nClick Camera settings in the editing toolbar (camera icon) and click Copy to static cam to set the viewpoint. Click File >> Save scene to save the adjusted scene as the new default scene. For this, override the file “default_scene.scene” in the scenes folder of the FishSim directory.\nNote: The default scene will appear at each start of FishSim and as the starting scene in FishPlayer. In FishPlayer the default scene also serves as a pause during experiments (Figure 3A). Adjusting the scene has to be done only once.\nimgsrc://cloudfront.jove.com/files/ftp_upload/58435/58435fig3.jpg\nFigure 3: Screenshots of a scene in FishSim. (A) The empty default scene without a fish, (B) a scene showing a male alone, (C) a scene showing that same male together with a model female with a spot, and (D) a scene showing the identical male and the identical model female without a spot. Please click here to view a larger version of this figure.[href=https://www.jove.com/files/ftp_upload/58435/58435fig3large.jpg]\nDesign of a virtual male stimuli for presentation during mate-choice tests\nNote: Prepare virtual male stimuli which will later be animated and presented to live focal females during mate-choice tests.\n\t\nIf not already open, start FishSim. Press F1 to enter the editing mode.\nClick File >> Load fish model from the drop-down menu and load the default male sailfin molly template “default_PLM.x” by selecting it from the folder models.",
    "Left double-click on the loaded fish to select it. It will be highlighted in a mesh. Click the gear icon in the toolbar to open the fish toolset. A box will pop up with the editing options used to customize the virtual male. Untick Show mesh for a better view of the fish.\nChange the Name to male.\nNote: The Name of the male is important and represents the “role” it will later play during the animation. This Name must be identical for every newly-created virtual male that will be used later during the experiments.\nAlter the Scale (dimensions) of the male by changing the values for x, y, and z, if needed and click Apply.\nEdit the male’s texture by clicking Textures in the Edit Toolbox. Click on a feature of the fish (body, dorsal, caudal) to change it.\nNote: The Choose a texture for box will pop up with all .png-files that may be used as textures. Textures will appear with names as given in the models folder.\nClick on a texture displayed in the list (right), and it will directly appear and replace the prior texture on the fish.\nWhen the desired male is created, click Apply under Config in the Edit Toolbox, and click Save fish to disk. Save the new male as “Male_A.fish” in the models folder.\nAdditionally, save the whole scene (File >> Save scene) including that one male in the scenes folder. Here, it is recommended to use the name “Male_A_alone.scene” (Figure 3B).\nClick File >> Load scene to load the empty default scene and repeat steps 1.3.2 to 1.3.9 to create as many different virtual males as needed and save each newly created male under a unique name in the models folder and as a new .scene-file in the scene folder.",
    "Design of virtual model female fish for presentation during the observation period\nClick File >> Load scene to load the default scene. Follow step 1.3.1 and click File >> Load fish model to load the default female template “default_PLF.x” from the models folder.\nLeft double-click on the loaded female to select it and open the fish toolset. Change the name to “female”. Scale the female if needed as described in step 1.3.5.\nNote: Name and scaling should be identical for all females for the purposes of this experiment.\nReplace the default female body texture with the previously created “spot”-body texture (listed in the box on the right) as described in steps 1.3.6 to 1.3.7.\nClick Apply under Config in the Edit Toolbox, then save fish to disk by clicking on Save and create a file “Female_1S.fish” (S = spot).\nClick File >> Load scene to load the default scene. Repeat steps 1.4.1 to 1.4.4 to create at least one (or as many as needed) identical model female but without the gravid spot and name it “Female_1NS.fish” (NS = no spot). Save each fish in the models folder. \nNote: For the observation period of the MCC experiment, scenes including one male and one female have to be created and saved.\nClick File >> Load scene to load the empty default scene. Click File >> Load fish model to insert a virtual male “Male_A.fish” from the models folder. Click File >> Load fish model again to add the virtual model female “Female_1S.fish” to the scene. Change the position of each fish by altering their x-, y-, and z-coordinates so that their bodies do not overlap.\nNote: Delete a fish from the scene by double-clicking on it and pressing Delete on the keyboard.",
    "Save the scene including male and model female by clicking File >> Save Scene as “Male_A_with_Female_1S.scene” (Figure 3C).\nRepeat steps 1.4.6 to 1.4.7 to create three additional scenes for: (1) Male_A with Female_1NS (see Figure 3D), (2) Male_B with Female_1S, and (3) Male_B with Female_1NS.\n2. Animation of Virtual Fish Stimuli\nNote: Each type of animation needed for the experiment needs to be prepared only once using one exemplary male scene and one exemplary observation scene (male and female animated together). During the animating process, a swimming path for each fish is created which can later be replayed by any fish, as long as the name is identical (see step 1.3.4).\nVirtual male animations for presentation during mate-choice tests\nNote: Prepare two animations of a virtual male: (1) a swimming path with a duration of 7.5 min, and (2) a swimming path with a duration of 5 min.\n\t\nPlug in the gaming controller (e.g., Sony Play Station 3) into the USB port of the operating computer.\nOpen FishSim and click File >> Load scene to load the scene of one male from the folder scenes, e.g., “Male_A_alone.scene”. Start FishSteering by clicking on the FishSteering icon.\nConfigure the controller settings in a separate window.\n\t\tNote: FishSim and FishSteering run simultaneously and fish can either be steered in viewing mode, as shown during experiments, or in editing mode by pressing F1.\nTo animate the (male) fish, select it from the drop-down menu of the steering panel. Model names here correspond to the name given in the Edit Toolbox (see step 1.3.4).\nClick Start placing and use the controller to place the fish at any starting position in the virtual tank. Click Stop placing.",
    "Start recording the fish’s swimming path by clicking Start recording. Use the controller to move the fish around the scene.\nNote: The duration of the recording is given in the lower right corner of the steering panel.\nClick Stop recording. Click Save to save the swimming path as a .bag-file (a “record”) on the drive (e.g., on the desktop). Choose the name of the file to represent the duration of the record, e.g., “7_30_min_male_alone.bag”.\nNote: Once the recording is stopped, it is not possible to edit the total duration again.\nEdit the recording to add movement of the male’s dorsal fin to mimic male courtship behavior during mate-choice tests. Select the dorsal fin from the drop-down menu in the Edit feature (only one feature can be edited at a time).\nSelect Start editing and the complete swimming path will be replayed. Press the L1 button on the controller to raise the dorsal fin at specific points in time. Click Save to save the edited version of the swimming path as a new .bag-file.\nRepeat steps 2.1.8 and 2.1.9 but select the gonopodium to add its movement. Save the final version for later use in FishPlayer. Close FishSteering. \nNote: It is recommended to save bag-files for each editing step under a unique name. By this, it is always possible to come back to an earlier version of the animation if something in the editing process goes wrong.\nVirtual male and model female animation for presentation during observation period\nNote: Prepare one animation with a virtual male and the virtual model female in courtship, thus sexually interacting with each other, with a total duration of 10 min.",
    "Open FishSim. Press F1 to enter the editing mode and click File >> Load scene to load a scene with male and female, e.g., “Male_A_with_Female_1S.scene”. Start FishSteering. \nSelect male and female alternately to place them (by clicking Start/Stop placing) in the virtual tank.\nFor the recording, select the female fish first from the drop-down menu of the steering panel and create a swimming path with duration of 10 min following steps 2.1.5 to 2.1.6.\nNote: The swimming path of only one fish at a time can be recorded. After animating the first fish, the swimming path of the second fish can be included using the Edit function while the previously steered fish will be replayed alongside for the whole duration of the animation.\nClick Stop recording and Save the swimming path on the drive, e.g., as “10_00_min_male_with_female.bag”. Then successively edit the male’s swimming path, dorsal fin movement and gonopodium movement as described in steps 2.1.8 to 2.1.10. Save the final version for later use in FishPlayer.\n3. Preparing Animation Playlists for the MCC Experiment\nNote: Use FishPlayer to present animations on two monitors to live focal females. Arrange the playlist for each monitor separately to simulate the procedure of the MCC experiment (Figure 1). The tool consists of a main window showing the record playlist for each monitor (Figure 4) and a separate animation window for each presentation monitor.\nGeneral functionality and arrangement of scenes and records\nClose all windows and open FishPlayer by clicking the corresponding icon. Configure the setup for the use with two monitors for presentation (left and right) and click Launch.\nNote: The default scene created in step 1.2.4 (saved in scenes/default_scene.scene) will always be loaded and displayed on both monitors as the starting scene and during a pause command.",
    "Add entries to the playlist for each monitor separately. Click Add load scene to add the scene of e.g., Male A, from the scenes folder in the FishSim directory. Click Add play record to add a record from the drive, e.g., the 7.5 min record for a male alone.\nNote: The scene and the following record will then be linked by the software and the virtual male depicted in the scene will be animated as defined in the corresponding record.\nClick Add pause to add a pause command of a specific duration (minutes/seconds) showing the default scene without fish as a break for fish handling between records.\nNote: Pause duration should generally depend on the time needed for fish handling. Click an entry and drag to change its order in the list. Selected entries are marked in red. Delete an entry from the playlist by selecting the entry and clicking Delete selection. \nClick Play/Stop to start and stop a presentation. Stop will always finish the complete playlist, e.g., there is no way to pause at the middle of a playlist once running.\nNote: Playlists will always start from the first entry and run from top to bottom. Therefore, the correct order of all entries has to be set prior to the experiment and cannot be changed afterwards without stopping the presentation. A timer at the bottom of the window shows the duration and actual time of the current playlist.\nPlaylist arrangement for the two treatments and the control of the MCC experiment \nNote: In terms of the entry arrangement, the MCC experiment is split into two parts: (1) the first mate-choice test, and (2) the observation period followed by the second mate-choice test. Therefore, for each treatment and the control, playlists have to be arranged in two different orders.",
    "When running the experiment, first, prepare a playlist for the first mate-choice test.\nSecond, in the process of the running experiment, change the arrangement of the playlist for the subsequent observation period and the second mate-choice test according to which virtual male was preferred by the focal female in the first mate-choice test.\nSpecific playlist arrangement for the “spot” treatment\nFor the first mate-choice test in Treatment 1, order the playlist exactly as depicted in Figure \nAfter the first mate-choice test, take break for calculating which virtual male was preferred (see step 5.9 below). Then rearrange the playlists for the observation period, in which public information is provided to the focal female by showing the prior non-preferred male together with the model female.\nArrange the playlist for observation and the following second mate-choice test according to Figure 5.\nFor the observation period, link the 10-min record (male and model female together) with a scene showing the prior preferred male alone.\nNote: In this case, only the swimming path of the male will be displayed and, because it is missing in the scene, the virtual model female will be absent.\nFor the playlist featuring the non-preferred male, link the 10-min record to the scene including the prior non-preferred male together with the model female. Choose the scenes including a model female with a gravid spot (S) for this treatment.\nNote: In contrast to 3.3.2, here, the identical record will be replayed but now the model female is visible.\nimgsrc://cloudfront.jove.com/files/ftp_upload/58435/58435fig4.jpg\nFigure 4: Screenshot showing the FishPlayer playlists for the left and right monitors in the first part (i. e., the first mate-choice test) of the MCC experiment. Playlist entries are ordered as needed for the first mate-choice test in Treatment 1. Please click here to view a larger version of this figure.[href=https://www.jove.com/files/ftp_upload/58435/58435fig4large.jpg]",
    "imgsrc://cloudfront.jove.com/files/ftp_upload/58435/58435fig5.jpg\nFigure 5: Screenshot showing the FishPlayer playlists for the left and right monitors in the second part (observation period and second mate-choice test) of the MCC experiment. Playlist entries are ordered as needed for the observation period and the second mate-choice test in Treatment 1. Please click here to view a larger version of this figure.[href=https://www.jove.com/files/ftp_upload/58435/58435fig5large.jpg]\nSpecific playlist arrangement for the “no spot” treatment\nFor Treatment 2, order the playlists as described for Treatment 1 (Figures 4 and 5), but instead use the scene including the virtual model female without a gravid spot (NS) during observation.\nSpecific playlist arrangement for the control for choice consistency\nNote: In the control for choice consistency, playlist entries for the mate-choice test are identical to Treatments 1 and 2 (Figure 4). During the observation period, however, no public information is provided to focal females and, hence, no model female is visible.\n\t\nOrder the playlists as shown in Figure 5 but combine the scenes for each male alone together with the 10-min record.\nNote: In this case, only the swimming path of the male fish will be displayed and, because it is missing in the scene, the model female will be absent on both sides.\n4. Experimental Setup\nPlace two computer screens each at opposite ends of a test tank. Adjust the screens to cover most of the glass walls of the test tank and to have 1.5 cm of space between the screens and the tank walls. Provide illumination to the tank from above.",
    "Cover the tank bottom with a thin layer of gravel and fill it with water appropriate for live fish to the height of the screens. Mark a choice zone with a vertical line at 20 cm depth from each end on the outside of the tank. Have an acrylic glass cylinder and two stopwatches at hand.\nConnect the monitors to the power supply and to the operating computer, placed at least 1 m away from the test tank, e.g., on a small table (Figure 6).\nimgsrc://cloudfront.jove.com/files/ftp_upload/58435/58435fig6.jpg\nFigure 6: Experimental setup for the MCC experiment with computer animation. The operating computer connects to two presentation monitors (Monitor 1 and 2) which replay animations to live focal females inside the test tank. For illustration, both LCD monitors are angled to show an animated scene. Please click here to view a larger version of this figure.[href=https://www.jove.com/files/ftp_upload/58435/58435fig6large.jpg]\n5. Running the MCC Experiment\nNote: Follow the experimental procedure below to perform one trial of Treatment 1, Treatment 2 or the control MCC experiment using one live focal female (see Figure 1).\nOpen FishPlayer on the operating computer and arrange the playlists for the first mate-choice test as e.g., described for Treatment 1 (Figure 4). Check that the monitors for presentation are running and that they are showing the empty default scene.\nPlace a live focal female inside the test tank. Let her swim freely and acclimate to the tank and the presentation of the empty tanks on both monitors for a period of 20 min.\nAfter acclimatization, place the focal female in a clear acrylic cylinder in the middle of the test tank to ensure an equal distance to both monitors and run the playlists on both monitors simultaneously by clicking Play, starting with the first mate-choice test.",
    "Note: The focal female is allowed to watch both virtual stimulus males from inside the cylinder for around 2.5 min.\nBefore the timer reaches 02:30 min, go slowly to the experimental tank and release the focal female from the cylinder by gently lifting it up straight out of the water, e.g., at 02:15 min.\nNote: Here, the exact timing depends on the distance from the operating computer to the test tank and should be determined during prior test runs. It is critical to act slowly and gently to avoid stressing the fish. Since fish may act very fast, it is recommended to already have one stopwatch at hand while releasing the female to directly start measuring association time (see step 6.1).\nReturn to the operating computer. Observe the focal female and have two stopwatches at hand to measure association time with each virtual stimulus male (see step 6.1).\nNote: The focal female is allowed to swim freely and choose between both males for 5 min.\nStop measuring association time when the timer reaches 07:30 min. The pause entry will then run for 1.5 min. Use the pause as handling time to, again, place the focal female inside the cylinder and write down the time for each virtual male on a data sheet.\nNote: After the pause, the second 07:30 minutes entry will start and the focal female can watch both males for 02:30 minutes. Male position is now switched between left and right to control for a possible side bias in focal females (see step 6.3).\nBefore the timer reaches 11:30 min, release the focal female from the cylinder. Measure association time for the next 5 min.",
    "Stop measuring association time when the timer reaches 16:30 min. The pause entry will run for 1 min. Use this handling time to place the focal female inside the cylinder.\nWrite down association times for the second measurement. For each male, sum up association times of both halves of the first mate-choice test (before and after males were switched). Calculate whether the focal female had a side bias and which male was preferred by the focal female (see steps 6.1 to 6.3).\nNote: It is no problem if the pause is finished before the calculation is done, since proceeding to the next step needs the playlist to reach its end and stop.\nRearrange the playlists (do not close FishPlayer!) as shown in Figure 5 (depending on the current treatment) so that the prior preferred male will be animated alone during the observation period and the prior non-preferred male will be animated together with the virtual model female.\nNote: Changes made to the playlists are not visible to the focal female.\nClick Play to continue the second part of the experiment and the entries will be replayed from top to bottom starting with the 10-min observation period.\nNote: During the observation period, the focal female remains inside the cylinder but is able to watch both presentations.\nAfter the observation period, a pause of 0.5 min starts. Before the timer reaches 10:30 min, release the focal female from the cylinder and start the second mate-choice test with the 5-min record for each male. Measure association times for the next 5 min.\nStop measuring association time when the timer reaches 15:30 min. The pause entry will then run for 1.5 min. Place the focal female inside the cylinder and write down the measured time for each virtual male.",
    "Note: After the pause, the next 7:30 min entry will start and the focal female can watch both males (whose position has again switched between left and right) for 2.5 min.\nBefore the timer reaches 19:30 min, release the focal female from the cylinder and measure association time for the last 5 min.\nStop measuring association time when the timer reaches 24:30 min and terminate the experiment. Write down association times for both virtual males and proceed with analysis.\n6. Data measurement\nMeasure association time during the first and the second part (prior to and after stimuli are switched) of each mate-choice test, when the focal female is allowed to choose between the two males.\nNote: Start measuring when the female crosses the line confining the choice zone with her head and operculum. Stop measuring when her head and operculum are outside the choice zone.\nSum up association time measured for each male in the first and second part of a mate-choice test and determine which male was preferred.\nNote: The preferred male is determined as the one the focal female spent more than 50% of the total time she spent in both choice zones within a mate-choice test. For analysis, association time is often translated into preference scores (relative mate-choice value), which is defined as the time a focal female spent with a male divided by the time she spent with both males in the mate-choice zones.\nCalculate whether focal females show a side bias during the first mate-choice test and exclude biased females from the final analysis.",
    "Note: Focal females are considered to be side-biased if they spent more than 90% of the total time (both halves of the first mate-choice test) in the same choice zone, even after the male position was switched. Her choice for a male is then considered as side biased and the trial is terminated.\nMeasure each focal female’s standard length (SL).\nNote: To prevent fish from being stressed during experiments, measurements are always taken after the termination of an experimental trial.\nSubscription Required. Please recommend JoVE to your librarian."
  ],
  "subjectAreas": [
    "Behavior"
  ],
  "bigAreas": [
    "Ecology & Environmental Biology"
  ]
}