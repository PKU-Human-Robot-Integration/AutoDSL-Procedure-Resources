{
  "id": 2663,
  "origin_website": "Cell",
  "title": "Software for segmenting and quantifying calcium signals using multi-scale generative adversarial networks",
  "procedures": [
    "Step-by-step method details\nStep-by-step method details\n4SM is designed to work primarily with spatiotemporal maps of fluorescence signals. Movies of dynamic fluorescence signals (i.e., cellular calcium signals) can be obtained from multiple imaging systems including: widefield, spinning disk confocal, 2 photon microscopy or macroscopy systems that can yield an image stack (movies of fluorescence signal over time). The fluorescence signals in the image stack can be plotted in 2D map (spatiotemporal map) as described in detail previously,1[href=https://www.wicell.org#bib1],2[href=https://www.wicell.org#bib2] and these maps can be effectively segmented and analyzed using the 4SM software.\n4SM utilization\nThe full tutorial (Methods video S2[href=https://www.wicell.org#mmc2]) on how to launch and use 4SM for image segmentation can be found on the following link: https://youtu.be/uOI69A7bnyw[href=https://youtu.be/uOI69A7bnyw].\nTo launch your application,\nOn Windows OS: double click the batch script file <windows_start.bat> as shown in Figure 3[href=https://www.wicell.org#fig3]B.\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/2156-Fig3.jpg\nFigure 3. Launch 4SM application\n(A) Browse to the source code of the application and double click on <windows_start_app> to launch the application.\n(B) The URL of the application will be displayed in the batch window resulting from executing step (A).\nOn Linux based OS and macOS, open a shell window and run the following command:\n> sh linux_start.sh\n    Your browser does not support HTML5 video.\n  \nMethods video S2. How to use 4SM software, related to steps 1–5 (step-by-step method details section)\nThe video shows full tutorial on how to launch and use 4SM for image segmentation and provide an example on how to analyze a calcium spaciotemporal map.\nA new browser will open with 4SM app running on the following URL: http://localhost:8501[href=http://localhost:8501].\nNote: If you are using an older version of Internet Explorer, copy the above URL and paste it in Google Chrome, Microsoft Edge, or Firefox.\nClick on <Upload an Image> on the left panel as shown in Figure 4[href=https://www.wicell.org#fig4]A.\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/2156-Fig4.jpg",
    "Figure 4. How to use 4SM software\n(A) Browse to upload one or more images.\n(B) Control menu displaying the different parameters to process images.\n(C) Commands include threshold, connectivity, and calibrations values (C) commands for 4SM execution, displays current selected run (selected images), enables displaying historical runs and export results function.\n(D1) Click to expand and display quantification results.\n(D2) Displays quantification results calibrated by the set “Height Calibration” and “Width Calibration”.\n(E1) Expand to display graphical plots of the currently selected run.\n(E2) Displays the graphical plots from all the runs.\n(F) Displays the original selected image and its corresponding segmented image, thresholded image and the overlay of the original image signals and 4SM segmented image.\nBrowse to the folder “src/test/stochastic” and select the 2 images available in this folder.\nSet the Threshold, Connectivity, Heigh Calibration, Width Calibration, and Stride Values. For details about the definition of these settings, refer to Section “4SM parameters values[href=https://www.wicell.org#sec2.7]”.\nClick on “Run Prediction”.\nThe images selected will be displayed in the first column of the center panel as shown in Figure 4[href=https://www.wicell.org#fig4]. The application will begin processing the images and finally the result of the processed images will be display in the center panel.\nQuantification and calibrated quantification\nExpanding the accordion menus shown in Figures 4[href=https://www.wicell.org#fig4]D1 and 4D2 shows the quantification and calibrated quantification results respectively in the form of a table.\nFigure 5[href=https://www.wicell.org#fig5] shows the quantification results of each processed image. Each row in the table represents the information pertaining to a detected region by the 4SM algorithm for the image specified in the column “Image”. The remainder columns in the resulting table are explained below:\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/2156-Fig5.jpg\nFigure 5. Quantifications of results",
    "The menu is showing the image name and the coordinates of each of the detected regions. Calculations of frequency of, spatial spread and area of events are executed. The interval between events is also calculated.\n  Frequency: the number of fluorescence segmented events in each map.\n  Left and Top: event coordinates on the map.\n  Spatial spread: event travel distance (on the x-axes).\n  Duration: event travel time (on the y-axes).\n  Area: event area occupied in a map.\n  Interval: distance between events.\nStatistical analysis\n4SM produces statistical plots as shown in Figure 6[href=https://www.wicell.org#fig6]. The x-axis of each plot displays the <run_id>, which is an autogenerated identifier produced by 4SM to label each run as shown in Figure 4[href=https://www.wicell.org#fig4]C. This enables the user to toggle between different outputs (i.e., runs).\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/2156-Fig6.jpg\nFigure 6. Graphical representation of the analysis\n(A) Statistical analysis of the output of each run (image) are displayed in graphical format. The x-axis displays the run_id, which is a randomly generated number to identify the output being displayed.\n(B) Statistical analysis of the output from 2 runs (images). In this example, plots from different runs are plotted on the same graph to allow interpretation and comparison of results.\nVisualization of processed images\nThe main panel of 4SM displays each input image and all its corresponding analyzed images as shown in Figure 4[href=https://www.wicell.org#fig4]F.\nDisplaying results from multiple runs\n4SM aggregates results from different runs into the same quantification results and plots. To allow proper statistical analysis at least 5 runs are recommended.\nRepeat steps 2–5 and choose the folder <src/test/rythmic> instead of <src/test/stochastic>.\nFigure 6[href=https://www.wicell.org#fig6]B displays the plots from the current and previous runs.\nExcluding results from multiple runs\nEach run output, which consists of one or more images processed, is stored under src/<run_id. To exclude the results, simply delete this folder.",
    "4SM parameters values\nThe 4SM software can be optimized using multiple parameters inputs to enhance the segmentation output. These parameters can affect the quality and the speed of the segmentation process. A summary of 4SM parameters is shown in Table 1[href=https://www.wicell.org#tbl1].\ntable:files/protocols_protocol_2156_1.csv\nThreshold, Connectivity, Height calibration, Width calibration and Stride.\nChoosing 4SM input parameters\nThreshold: It is dependent on the image quality obtained and should contain most of the calcium signal with minimum noise. The ideal values vary dependent on the calcium signal. For our datasets, we pick a value between 30 and 50 to get the best binary segmentation results. A higher threshold value might diminish the subtle activation boundaries of the calcium signal, in turn will help to visualize strong signals, and discard weak signals.\nConnectivity: Finding unique number of events based on connected components algorithm. A connectivity of 8 is mostly desired for the prediction, as it considers all possible directions for neighboring pixels for generating connected components.\nHeight and Width Calibration: This is the size of the cropping window that goes from left to right and top to bottom. This cropped image is inserted to the 4SM model and as the model expects the input to be at least 64 pixels, any value greater than that is accepted. Generally, 64 × 64 is the desirable size for these parameters.\nStride: The stride should be 8 or 16 if the system does not have a powerful GPU (such as NVIDIA RTX 2080 or higher), to give fast output of the prediction. And the user should choose stride 3 for the most accurate segmentation, however it will take longer."
  ],
  "subjectAreas": [
    "Computer Sciences",
    "Cell Biology",
    "Microscopy"
  ],
  "bigAreas": [
    "Molecular Biology & Genetics",
    "Bioengineering & Technology"
  ]
}