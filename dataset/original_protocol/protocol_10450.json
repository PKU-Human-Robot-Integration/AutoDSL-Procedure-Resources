{
  "id": 10861,
  "origin_website": "Jove",
  "title": "Behavioral Tracking and Neuromast Imaging of Mexican Cavefish",
  "procedures": [
    "All procedures are performed following the guidelines described in \"Principles of Laboratory Animal Care\" (National Institute of Health publication no. 85-23, revised 1985) and the approved by University of Hawai'i at Manoa Institutional Animal Care and Use Committee animal protocol 17-2560-3.\n1. Vibration attraction behavior (VAB) assay ( ≤ 10 min for entire recording procedure)\nNOTE: Use an infrared sensitive camera or build an infrared camera by modifying a USB webcam. To modify a USB webcam, see a detailed description presented by the Keene Lab in this cavefish issue at JoVE (From this A. mexicanus issue), or a brief description in the Supplementary Materials.\nRecording setup\n\t\nTo ensure that the camera remains in position, still, and at the proper focal length from the subject(s) being recorded, build a black box frame out of polyvinyl chloride (PVC) pipes, measuring 120 cm H x 45 cm L x 90 cm W.\nAfter construction of the frame, cover it with a plastic blackout curtain such as the one intended for hydroponic agriculture.\nOn top of the frame, put a black acrylic board with a window for the infrared camera at the center measuring the same diameter as the C-mounted adjustable zoom lens. Inside this box, place the VAB assay equipment (Figure 1).\nVibration apparatus\n\tNOTE: Vibrations are produced using a small function generator.\n\t\nFor the following methods, tune vibrations to an amplitude of 0.15 mm and a frequency of 40 Hz, which is the frequency that elicits a maximum response of attraction5,16.\nConnect the function generator to a horizontal facing speaker.\nAttach a 7.5 mm diameter glass rod 14 cm in length to the dust cover on the face of the speaker by using hot-glue or a gasket adhesive.",
    "Perpendicular to this rod and facing downward, attach another 7.5 mm diameter glass rod 4 cm in length (Figure 1).\nBehavioral assay\n\t\nAcclimate an experimental A. mexicanus for 4 days in a cylindrical assay chamber filled with conditioned water (pH between 6.8 - 7.0, conductivity approx. 700 µS, temperature approx. 22 ˚C) with a 12/12 L/D cycle. Check whether fish have acclimated by observing their latency to forage. Longer latency than in their home tank indicates more acclimation time is needed. Throughout acclimation, feed once a day with live Artemia nauplii.\nThe day prior to the day of the assay (after 3 days of acclimation), replace water in the assay chamber with fresh conditioned water.\nOn the day of the assay (after 4 days of acclimation), deprive experimental fish of food until after the assay is complete. Satiation will change their response to vibrations.\nSet the recording parameters in the VirtualDub freeware17: 15 frames/s, codec: x264vfw, recording duration: 3 min 30 s.\nPrepare the vibration-emitting apparatus (see step 1.2) by tuning to 40 Hz. See Figure 1 for the explanation of apparatus. Rinse the vibrating glass rod with deionized water to remove any water-soluble chemicals.\nWorking in the dark, place the assay cylinder on the recording stage illuminated by an infrared backlight in the black box and allow fish to acclimate for 3 min.\n\t\t\nAfter the 3 min acclimation, record 3 min 30 s of video. At the onset of the recording, insert the vibrating glass rod into the water column (approx. 0.5 cm depth).\nAvoid making any noise or vibrations while positioning the vibrating glass rod in the water as the fish can sense even the most minor disturbances.",
    "Finish this procedure within 30 s of starting the video recording to ensure that more than 3 min of the behavior is recorded.\nMonitor the video while recording to ensure that no errors occur during this stage.\nAfter finishing the recording, remove the vibrating glass rod from the cylindrical assay chamber and remove the assay chamber from the recording stage. Repeat from 1.3.5 for the next fish.\nVideo analysis\n\tNOTE: Converting the codec into a format that ImageJ can load only works on Windows operating system18 (Table 1).\n\t\nConvert the compressed avi video into a readable format for ImageJ and set analysis parameters.\n\t\t\nInstall AviSynth_260.exe (https://sourceforge.net/projects/avisynth2/), pfmap build 178 (http://pismotec.com/pfm/ap/), and avfs ver1.0.0.5 or ver1.0.0.6 (https://sourceforge.net/projects/avf/). Note that this method is program/version sensitive. The provided website links will guide to the proper versions (Table 1).\nRun batch file by double-clicking avs_creater.bat (supplemental file). Right click on the avs video file to be analyzed (select from the avs files created by avs_creater.bat).\nAs video analysis using the Tracker plugin in ImageJ requires loading of the ImageJ macro (supplemental file Macro_VAB_moko.txt), load the macro by drag-and-drop into the GUI shell of ImageJ. This macro will enable certain hot keys for the following analysis.\nIn the working directory, create a new folder entitled \"Process_ImageJ\".\nRight click on the .avs file to be analyzed (select from the avs files created by avs_creater.bat). Select the Quick mount option. After the avs file is mounted as an external drive, open the avi file in ImageJ (the avi file has name ending with \".avi\").",
    "To set the scale of the distance measurement, select the diameter of the assay chamber by drawing a straight line across the chamber using the Straight-line selection tool, then click Analyze > Set scale function. For example, input 9.4 cm if using a cylindrical dish with a 9.4 cm inner diameter. Check the radio box of Global in order to standardize the scale across all of the following video analyses.\nConvert to binary stack and run analysis.\n\t\t\nCopy the assay chamber area by using the oval selection tool and then right click and select Image > Duplicate. At this time, specify the range of frames to keep for further analysis, e.g., keep the first 2,700 frames after the vibrating rod entered the water (at 15 fps this is exactly 3 minutes of video).\nClear the outside of the assay chamber and convert to a binary image by hitting the hot key 7 on the number bar of the keyboard.\nAfter the background clears and a prompt appears, add a black dot at the center to indicate the position of the vibrating glass rod by using the oval selection tool already set to black with the fill function. Click OK and a prompt will appear to move on to the threshold adjustment.\nSet the threshold to make a binary (all black and white) image of the fish. Adjust the threshold so that the fish can be seen in entire video clips, and then select Apply.\nRun the \"Tracker\" plugin by hitting the hot key 8 on the number bar. Set the minimum pixel size to 100 when prompted and hit OK, generating the distance between the vibrating rod and the fish per frame for all 3 min of the binary video.",
    "Adjust the mis-tracking generated by noise in video. To do so, check the Results window to identify the frames that return the object number 3 or higher-indicating extra objects in those frames (e.g., particles in the water or the shade of the transparent arm of the rod) in addition to the \"rod\" and \"fish\" in the frame. Remove any extra objects using the paintbrush tool.\nHit the hot key 9 on the number bar to export a binary stack of images of the entire video (in case it is necessary to reanalyze) and an .xls file with coordinates and distance data (supplementary files CF01.xls, Threshold_CF01.tif and, Trac_CF01.tif). Hot key 9 will also close all files associated with the current video. Repeat steps 1.4.2.1 through 1.4.2.6 for all replicates.\nRun the macro script (supplementary file JoVE_2cmVAB_template_15fps.xlsm) to consolidate multiple Tracker result files (.xls) into one spreadsheet and count the number and duration of approaches into a 1.5 cm area from the rod. Approaches not lasting at least 0.5 s will not be counted. Change the parameters of distance and time counted as an approach according to particular questions of interest.\nRelease the PC disk-space after finishing all analyses. Remove mounted files to free up disk-space - avi.avi and .avi.avs files (extensions generated by the software)-by running a batch file multiunmountdel.bat in the same folder where avs_creater.bat was run in the section 1.4.1.2.\n2. Sleep and hyperactivity assay (24 h recording)\nBehavioral assay\n\t\nAcclimate five experimental fish for 4 days or more in each chamber of a custom-designed 10 L acrylic recording aquarium (45.9 cm x 17.8 cm x 17.8 cm; length x width x depth, respectively) filled with conditioned water (see step 1.3.1).",
    "Separate each individual chamber with black acrylic boards making chambers equal in size, measuring 88.9 mm × 177.8 mm × 177.8 mm (Figure 2). Be sure to cover each tank to prevent fish from jumping between chambers.\nSet the programmable power timer to automatically turn on white LED light for 12 h, and off for 12 h every day during acclimation period (for example, set the light on at 7 A.M. and off at 7 P.M.). This will entrain the circadian rhythm of fish (if it is susceptible to entrainment).\nUse opaque, white acrylic boards of similar dimension to the 10 L tank as diffusers to pass white and infrared light through in order to provide diffuse light with even intensity across all tanks.\nThroughout acclimation, feed once a day with live Artemia nauplii and provide aeration through sponge filters in each aquarium.\n\t\t\tNOTE: Ensure fish are fed at consistent times (i.e., 1x per day at 9:00 A.M.) as feeding time can also affect entrainment of circadian rhythms19.\nCheck whether fish have become acclimated by observing their latency to forage. A longer latency than in their home tank indicates more acclimation time is needed.\nThe day prior to the day of the assay (3 days or more of the acclimation), replace water in the assay chamber with freshly conditioned water (see step 1.3.1).\nSet the recording parameter in the VirtualDub software17: 15 frames/s, codec: x264vfw, recording duration: 86,400 s (24 h).\nTurn on the infrared backlight behind the recording stage (see Figure 2). By observing the VirtualDub live image on screen, adjust the position of each aquarium to make them face the USB camera.\nOn the day of recording, feed each fish with live Artemia nauplii, remove all sponge filters, and turn on the infrared backlight.",
    "Start 24 h recording in the morning (for example, the start time is 9 A.M. and the finish time is 9 A.M. the following day). Start capturing the video and secure the location to avoid a disturbance. Periodically check that the recording is running.\nAfter 24 h, make sure that the video saved correctly. Transfer the video to the PC workstation to track and analyze the fish's behavior.\nVideo analysis\n\t\nFirst, check the video quality by looking at the lighting. Check if there is one fish in each section, and if there are any foreign movements that may cause mis-tracking.\nPrepare the mask to avoid mis-tracking outside of the aquarium. Make two masks: one for 'even' and one for 'odd' fish, based on their sequence order in the tanks.\nMake two folders named \"odd\" and \"even\" for the masks described above. Move the tracking parameter file of SwisTrack in each of these folders.\nOpen the tracking parameter file of SwisTrack tracking software (supplementary file Tracking_odd.swistrack or Tracking_even.swistrack). Specify the path to the video file and mask file, then save and exit out of the tracking parameter file. Adjust blob number and maximum pixels parameters in \"Blob detection\" and \"Nearest neighbor Tracking\" components, respectively, according to the experiments.\nDouble-click to run a script of win-automation software which will automatically open SwisTrack software (supplementary file swistrack_1.exe, swistrack_2.exe, swistrack_3.exe or swistrack_4.exe- these are all the same executable files), which aids in updating the adaptive background subtraction in SwisTrack.\nOpen Tracking_odd.swistrack or Tracking_even.swistrack in SwisTrack software to load the tracking parameter file. After loading the parameters, press the run button to start tracking.",
    "Within the initial 9,000 frames (600 s, i.e., first 10 min of the recorded video), check whether fish tracking is working by looking at the adaptive background subtraction, binary mask, and nearest neighbor tracking in the component list of SwisTrack (see accompanying video). Then select Adaptive background subtraction in the Component list.\nHit the R button on the keyboard to resume win-automation and leave the PC to track. Tracking will take 5 - 7 h per 24 h video for a desktop with 4-CPU cores and 8 GB of memory. According to needs, run multiple SwisTrack processes (including odd and even arenas of a single video file) up to the number of cores in the CPU. For example, 4-cores can handle 4 videos at once.\nDuring this tracking, avoid using this PC for other purposes because win-automation program automatically moves the mouse pointer. The initial 9,000 frames will be discarded in the following procedure.\nAllocate 3 Perl script files (1.fillupGaps2.pl, 2.Calc_fish_id_moko_robust, and 3.pl, 3.Sleep_summary_4cm_movingWindow.pl) to the folder containing the tracking files generated by SwisTrack in the 'even' and 'odd' folders (see step 2.2.3).\nClip one frame of the video from the video file using VirtualDub and import this clip as a photo into ImageJ. Select the length of the aquarium (45.9 cm) in ImageJ and calculate pixel/cm ratio. Write the pixel/cm ratio in 1.fillGaps2.pl in a text editor program and save.\nLaunch CygWin program, a Unix emulator. Locate the SwisTrack folder that contains the 3 Perl scripts by using cd on the command line.\nRun the Perl script by typing Perl 1.fillGaps.pl. These three Perl scripts will assign each tracking file to a unique chamber of the aquarium and analyze the sleep duration and swimming distance while the fish was awake. It will take 1-2 h to finish the analysis.",
    "Assess the text file named Summary_Sleep.txt to determine if the number of frames dropped from the analysis is acceptably low; missing fewer than 15% of frames is considered acceptable.\nCopy and paste the analyzed results from Summary_Sleep.txt to a spreadsheet with the macro (supplementary file Sleep_12hr12hr_TEMPLATE.xlsm).\nRun the macro to extract the summary data of tracking files.\n3. DASPMI or DASPEI staining of mechanosensory neuromasts\nNOTE: DASPMI and DASPEI staining is light-sensitive and should be done in dark conditions. Following protocol is for both DASPMI and DASPEI by using DASPMI as an example.\nStaining protocol\n\t\nFor a total of 1 L of staining stock solution (25 µg/mL), add 0.025 g of DASPEI or DASPMI crystals to 1 L of dH2O and let it dissolve overnight. Keep solution stored at 4 °C and protected from light.\nImmerse the fish in 2.5 µg/mL DASPMI or DASPEI dissolved in conditioned water (see step 1.3.1) for 45 min in a dark environment at 22 °C.\nAfter 45 min, remove fish from the DASPMI or DASPEI solution and anesthetize by immersion in an ice-bath of conditioned water with 66.7 µg/mL of buffered-ethyl 3-aminobenzoate methane sulfonate salt (MS222).\nMount fish in a Petri dish plate and photograph under a fluorescent microscope. Take z-stack images and save as .tif files for the following analysis.\nImage analysis using ImageJ\n\t\nInside the folder containing .tif files, paste a template of the ImageJ macro file (Neuromast_ImageJ.txt) and create a new folder entitled \"Process_ImageJ\". In the ImageJ macro file, set the path to the current directory.\nLaunch ImageJ and open the macro by dragging the macro file into the GUI or by clicking File > Open and selecting the macro file.",
    "Run the macro by clicking Macros > Run Macro. The macro will then automatically open a picture file to be analyzed. If the picture file does not open, click Macro > File pick up.\nFor Neuromast quantification, select the region of interest using Polygon Tool.\nHit the hot key 5 to duplicate region of interest.\nUse the Paint Tool to remove or add dots for extra or missing neuromast from the previous image and then hit 6. After hitting 6, two new windows will appear: scheme of numbered neuromasts dots and a table with total neuromasts quantified.\nHit 7 to save both files: one file is stored as a .tif image file and the other is saved as an .xls file. After these files are stored, a new picture file will open for analysis.\nConsolidate the neuromast counts of each fish into one spreadsheet by running the macro script (SN_Number_Diameter.xlsm).\nSubscription Required. Please recommend JoVE to your librarian."
  ],
  "subjectAreas": [
    "Behavior"
  ],
  "bigAreas": [
    "Ecology & Environmental Biology"
  ]
}