{
  "id": 1590,
  "origin_website": "Cell",
  "title": "Protocol for Drosophila sleep deprivation using single-chip board",
  "procedures": [
    "Step-by-step method details\nStep-by-step method details\nDownload the program code into the single-chip control board\nTiming: 4 h for those who are familiar with programming\nThe single-chip control board is programmable. We provide the verified program code which is easy to download into the single-chip control board. We also provide annotations and instructions next to the program code in the file “Program.C” for changing the parameters if necessary.\nThe program file ”Program.C” and ”Program.hex”, the CH340 driver, the STC-ISP software, and a readme text are provided in a shared network disk.\nWebsite: https://drive.google.com/drive/folders/1NhXpLkspr3mN014Ea5_oZ0JJ6yVOckyq?usp=sharing[href=https://drive.google.com/drive/folders/1NhXpLkspr3mN014Ea5_oZ0JJ6yVOckyq?usp=sharing]\nProgram on the single-chip control board.\nInstall the KeilC51Vcngr for the code compiler.\nOpen the programming interface of KeilC51Vcngr.\nOpen the file named “Program.C” by the KeilC51Vcngr software. Change the program code or adjust the parameters according to annotations if necessary.\nSave the program code and generate a new HEX file.\nNote: Please refer to the help documentation of the KeilC51Vcngr and the readme text we provided for more detailed instructions. If there is no need to change the program code, this step can be omitted.",
    "Note: For the sleep deprivation conducted by mechanical oscillation, to avoid mechanical damage as much as possible, the key principle is to use the smallest intensity and frequency of oscillations to achieve the maximum degree of sleep deprivation. In Drosophila, quiescence for 5 min or longer is proved and defined as a sleep episode (Shaw et al., 2000[href=https://www.wicell.org#bib14]; Hendricks et al., 2000[href=https://www.wicell.org#bib6]; Nitz et al., 2002[href=https://www.wicell.org#bib11]). Therefore, the interval between two shocks should be close to or less than 5 min to ensure that the sleep behavior is effectively disturbed. We utilize the single-chip control board to implement a pseudo-random process: after triggering signal input, it randomly selects a time point in a 170-s interval and activates the electromagnetic relay which is embedded on the board for 10 s, and then switches it off. This process allows the oscillator to randomly select a time point in each 3-minute interval to oscillate once (we name this interval as a random event interval). Therefore, the maximum interval between oscillation events is 6 min. This pseudo-random process could be easily adjusted by changing the parameters of the program code according to the annotations we provide. As far as we tested, it seems unnecessary to shorten this random event interval, because the deprivation efficiency of the 3-minute interval is sufficient. If this random event interval is extended, the deprivation efficiency will be reduced accordingly.\nDownload the program code (HEX file) into the single-chip control board. (Figure 3[href=https://www.wicell.org#fig3]) (Also see troubleshooting 1[href=https://www.wicell.org#sec7.1])\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/1029-Fig3.jpg\nFigure 3. Download the program code into Single-chip control board\n(A) The TTL ports on the control board are connected to the USB-TTL downloader.",
    "(B) The USB-TTL downloader with the diagram for wiring the pins. The GND pin of the board is connected to the GND①, the T pin of the board is connected to the TXD⑤, the R pin of the board is connected to the RXD③ and the +5V pin of the board is connected to the +5V⑦ respectively.\n(C) The software interface and the brief steps of the STC-ISP. Step 1, Scan, let the computer recognize the downloader. Step 2, Check MCU, let the software recognize the chip model of the control board, the prompt will present if successful. Step 3, Open Code File, open the “Program.hex”. Step 4, Download/Program, download the program into the control board, the prompt will present if successful.\nPurchase a USB-TTL Automatic STC Downloader with cables.\nInstall the CH340 driver for the Downloader we provide in the shared network disk.\nInstall the STC-ISP which is provided by STC microTM for program download.\nConnect the USB port to the computer.\nThe TTL port contains four cables, the four cables DND, RXD, TXD, and 5V should be connected to the downloader and the control board respectively.\nOpen the STC-ISP software and choose the English interface\nClick the check button to make the computer determine the chip model of the single-chip microcomputer\nOpen the file ”Program.hex” through the STC-ISP software.\nDownload the program into the single-chip based control board.\nDisconnect the USB port and the TTL port.\nCritical: If a suitable downloader is purchased, this step will be relatively easy, no additional operations are required, just install the software, connect the wires and execute commands. Therefore, we recommend the Automatic STC Downloader which is easy to use.\nLink to the product: https://www.amazon.com/gp/product/B094WZLM94/ref=ox_sc_act_title_1?smid=A1U4I2CCV7K16T&psc=1[href=https://www.amazon.com/gp/product/B094WZLM94/ref=ox_sc_act_title_1?smid=A1U4I2CCV7K16T&psc=1]",
    "Note: In this case, only the IN1 input pin and the ER2 output pin are used according to our program.\nLead the control lines from the oscillator\nTiming: 4 h for those who are familiar with Circuits\nRetrofit the oscillator. (Figure 2[href=https://www.wicell.org#fig2], also see Methods video S1[href=https://www.wicell.org#mmc1] and S2[href=https://www.wicell.org#mmc2])\nNote: In order that the oscillator can be safely controlled by an external control module, the only refit we conduct is to solder two wires on the pins of a microswitch inside the machine. It has not changed any circuits inside this machine. The working voltage of the microswitch inside the control panel is 5V and the current is 2 mA. The working voltage of the control module is 12V and the current is less than 300 mA.\nDisassemble the control panel of the oscillator to find the microswitch that controls the start. Figure 2[href=https://www.wicell.org#fig2]C\nSolder a 30 cm wire to each of any two contralateral pins of the microswitch and lead the two wires out of the oscillator. The two wires are named control line 1 and control line 2. Figure 2[href=https://www.wicell.org#fig2]A\nReassemble the oscillator well and confirm it could work normally after power on. (Methods video S1[href=https://www.wicell.org#mmc1])\nTest the lead wires from two contralateral pins. After the oscillator is energized, the oscillator should start working after control line 1 and control line 2 connect once and continue working after disconnection, and the oscillator should stop after control line 1 and control line 2 connected once again and keep in standby mode after disconnection. (Methods video S2[href=https://www.wicell.org#mmc2])\n    Your browser does not support HTML5 video.\n  \nMethods video S2. The control mode is conducted by the control lines from two contralateral pins of the start/stop button, related to step 3 in step-by-step method details",
    "After the oscillator is energized, the oscillator should start working after control lines connected once and continue working after disconnection, and the oscillator should stop after control lines are connected once again.\nNote: This control mode is important for the following control logic design and circuit connection, please do not change it.\nPlace the oscillator in the artificial climate box. (Figure 2[href=https://www.wicell.org#fig2]A)\nPlace the shock-absorbing sponge under the oscillator to reduce the transmission of mechanical shock.\nPut the oscillator into the artificial climate box and test whether the oscillator can operate normally at proper speed after power on.\nFix the control lines with tapes and lead the control lines out of the climate box.\nConstruction of the single-chip board and relay board joint control module\nTiming: 4 h for those who are familiar with circuits.\nThe single-chip board and the three single relay boards are worked jointly which need to be connected properly. The three single relay boards are named Relay 1, Relay 2, and Relay 3 respectively. The modular design is applied in this system to simplify the operation of the program, debugging, and maintenance. Each part of the joint control module realizes a single function which easy to adjust according to certain users. Relay 1 periodically sends out high-level signals to the single-chip board and therefore controls the cycle length of the whole system. The cycle length could be adjusted by changing the parameters of Relay 1.\nThe single-chip board is responsible for generating stochastic signals. When the signal is triggered, the single-chip microcomputer selects a time point randomly to send a high-level signal within a given time period. The given time period could be adjusted by changing the program code with the help of the annotations we provide.",
    "Relay 2 receives the high-level signal from the single-chip board and starts the oscillation immediately by connecting the control line1 and line 2 once.\nRelay 3 receives the high-level signal from the single-chip board at the same time as Relay 2. The oscillation continues until the Relay 3 timer expires and connects the control line1 and line 2 again. Therefore, Eelay 3 controls the duration of continuous oscillation and it could be adjusted by changing the parameters of Relay 1.\nThe link of the product: https://www.amazon.com/gp/product/B074TBRRTY/ref=ox_sc_act_title_1?smid=A25LEPIYFTQZF2&psc=1[href=https://www.amazon.com/gp/product/B074TBRRTY/ref=ox_sc_act_title_1?smid=A25LEPIYFTQZF2&psc=1]\nhttps://www.alibaba.com/product-detail/DC-6V-30V-Trigger-Delay-On_60784456751.html?spm=a2700.galleryofferlist.normal_offer.d_title.3b3d1f0fXXgVMl[href=https://www.alibaba.com/product-detail/DC-6V-30V-Trigger-Delay-On_60784456751.html?spm=a2700.galleryofferlist.normal_offer.d_title.3b3d1f0fXXgVMl]\nSee Figures 4[href=https://www.wicell.org#fig4] and 5[href=https://www.wicell.org#fig5]. Please see the troubleshooting 2[href=https://www.wicell.org#sec7.3], 3[href=https://www.wicell.org#sec7.5], and 4[href=https://www.wicell.org#sec7.7] to understand the rationale.\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/1029-Fig4.jpg\nFigure 4. The diagram of the relay\nThe left is the simulation diagram and the right is the physical diagram. The DC power is connected to the VIN pin and the GND pin which are on the upper left of the board. The relay on the right is controlled by the embedded programs. The outputs of the relay are NO pin which normally opens, COM pin, and NC pin which normally closes. The trigger signal inputs via T pin and GND-T pin which are on the lower left of the panel. The parameter setting of embedded programs is through the Operation buttons on the bottom of the board. For more details, please refer to the product link.\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/1029-Fig5.jpg\nFigure 5. The diagram of the joint control module\nRelay 1 controls the length of the time interval for oscillating through the input trigger signal to the single-chip board. The single-chip board is responsible for generating stochastic signals. The generated stochastic signal is transmitted both to Relay 2 and Relay 3. Relay 2 controls the start of the oscillation event. Relay 3 controls the duration of the oscillation event.",
    "Connect the single-chip board and the relay board module according to Figures 5[href=https://www.wicell.org#fig5] and 6[href=https://www.wicell.org#fig6]\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/1029-Fig6.jpg\nFigure 6. Step-by-step circuit connections",
    "From top to bottom are Relay 3, Relay 2, Relay 1, and the single-chip control board respectively. Overall, in terms of circuit principle, the red wires are connected to high voltage; the black wires are connected to the COM pins except for Output1 and Output 2 are connected to the control lines. (A) Power supply. The NIV pins of relay boards and the VCC pin of the single-chip board are all connected to the +12 V pin of the 12 V DC power supply. The GND pins next to the NIV of the relay boards are all connected to the COM pin of the DC power supply. The GND pin next to the VCC pins of the single-chip board is connected to the COM pin of the DC power supply. (B) Relay 1. The NO pin of Relay 1 is connected to the IN1 pin of the single-chip board. The COM pin of Relay 1 is connected to the +12 V pin of the 12 V DC power supply. (C-D) Single-chip board. The CK pin of ER2 in the single-chip board is connected to the T pin of Relay 2. The COM pin of ER2 in the single-chip board is connected to the +12 V pin of the 12 V DC power supply. The CK pin of ER2 in the single-chip board is connected to the T pin of Relay 3. The COM pin of ER2 in the single-chip board is connected to the +12 V pin of the 12 V DC power supply. (E) Relay 2 and Relay 3. The GND-T pin next to the T pin of Relay 2 is connected to the GND pin of the Relay 2.",
    "The NO pin and the COM pin of Relay 2 are named Output1 and are connected to control line 1 and line 2 respectively. The GND-T pin next to the T pin of Relay 3 is connected to the GND pin of the Relay 3. The NO pin and the COM pin of Relay 3 are named as Output2 and are connected to control line 1 and line 2 respectively.",
    "Power supply. The NIV pins of relay boards and the VCC pin of the single-chip board are all connected to the +12 V pin of the 12 V DC power supply. The GND pins next to the NIV of the relay boards are all connected to the COM pin of the DC power supply. The GND pin next to the VCC pins of the single-chip board is connected to the COM pin of the DC power supply. (Figure 6[href=https://www.wicell.org#fig6]A)\nRelay 1. The NO pin of Relay 1 is connected to the IN1 pin of the single-chip board. The COM pin of Relay 1 is connected to the +12 V pin of the 12 V DC power supply. (Figure 6[href=https://www.wicell.org#fig6]B)\nSingle-chip board. The CK pin of ER2 in the single-chip board is connected to the T pin of Relay 2. The COM pin of ER2 in the single-chip board is connected to the +12 V pin of the 12 V DC power supply. (Figure 6[href=https://www.wicell.org#fig6]C)\nSingle-chip board. The CK pin of ER2 in the single-chip board is connected to the T pin of Relay 3. The COM pin of ER2 in the single-chip board is connected to the +12 V pin of the 12 V DC power supply. (Figure 6[href=https://www.wicell.org#fig6]D)\nRelay 2. The GND-T pin next to the T pin of Relay 2 is connected to the GND pin of the Relay 2 (Figure 6[href=https://www.wicell.org#fig6]C). The NO pin and the COM pin of Relay 2 are named Output1 and are connected to control line 1 and line 2 respectively. (Figure 6[href=https://www.wicell.org#fig6]E)",
    "Relay 3. The GND-T pin next to the T pin of Relay 3 is connected to the GND pin of the Relay 3 (Figure 6[href=https://www.wicell.org#fig6]D)The NO pin and the COM pin of Relay 3 are named as Output2 and are connected to control line 1 and line 2 respectively. (Figure 6[href=https://www.wicell.org#fig6]E)\nSet the operating parameters of the relay boards.\nNote: The built-in programs of relay boards are controlled by three parameters which are CL (on time), OP (off time), and LOP (cycle times). The supplier provides detailed instructions on how to set the parameters. Here, CL1, OP1, and LOP1 refer to the CL, OP, and LOP parameters of Relay 1 respectively. OP2 refers to the OP parameter of Relay 2. CL3 and OP3 refer to the CL, OP parameters of Relay 3 respectively.\nSet the Relay 1 to program 3.2, the CL1 = 195 s, the OP1 = 2 s, and the LOP1 is set as infinite. The embedded relay is closed for 2 s every 197 s consequently.\nSet the Relay 2 to program 1.1, the OP2 = 1 s. No other parameters are needed to be set. The embedded relay is closed for 1 s after trigger signal input consequently.\nSet the Relay 3 to program 2, the CL3 = 10 s, the OP3 = 1 s. Consequently, after the 10 s delay, the embedded relay is closed for 1 s after trigger signal input.\nNote: The single-chip board contains five inputs: IN1-IN5. There are four relay boards embedded in the single-chip board which contains CB, CK, and COM pins. According to the program we downloaded to the board, the IN1 pin, the CK pin, and COM pin of ER2 are chosen as the input and the output ports respectively in this case.\nDrosophila sleep deprivation",
    "Timing: 3 days\nThe DAM2 system is used to record the efficiency of sleep deprivation and the SCAMP (Nathan et al., 2012[href=https://www.wicell.org#bib10]) is used to conduct the data analyses. The power of DAM2 is supplied by the PSIU9 Interface Unit and the sleep data is uploaded by Cables and Connectors as mentioned in the resource table. The flies need to be prepared ahead as mentioned above. The selected flies are loaded to the DAM2 system and fixed on the oscillator to conduct the sleep deprivation.\nPreparation of glass tubes for monitoring. See Figure 7[href=https://www.wicell.org#fig7]A.\nimgsrc:https://prod-shared-star-protocols.s3.amazonaws.com/protocols/1029-Fig7.jpg\nFigure 7. Schematic diagrams for sleep deprivation\n(A) The schematic diagram of a glass tube contains a fly.\n(B) The glass tube is inserted into a monitor.\n(C) Fix the monitoring tube with rubber bands.\n(D) Fix the monitoring boards in the oscillator and connect the monitoring board to the data collection system.\nNote: Contaminants usually adhere to the newly purchased glass tubes. Boil and wash the glass tube in ddH2O to reduce the adhesion of contaminants. Finally, atmospheric pressure is utilized to fill the food into the glass tube\nPlace the glass tubes in a beaker and boil for 5–10 min in ddH2O. Clean the glass tube once with ddH2O.\nBundle the clean glass tubes with rubber bands, rinse the inside of the glass tubes with ddH2O for 4 min, and dry it in an oven.\nUse ddH2O to prepare 150mL food solution with a final concentration of 5% sucrose and 1.5% agar as mentioned above.",
    "Pour the prepared food solution into a clean petri dish with 10 cm in diameter and 1.5 cm in depth. Quickly and stably put the bundled glass tube vertically into the petri dish, and wait for the food to cool and solidify. Under atmospheric pressure, the food liquid will enter the glass tube about 1.5 cm.\nTake out the monitoring tube from the petri dish, wipe off the remaining food on the outer wall of the monitoring tube, and seal the food end with a plastic plug.\nLoad the flies into the monitoring tubes. See Figures 7[href=https://www.wicell.org#fig7]B and 7C\nAnesthetize fruit flies with carbon dioxide.\nUse a brush to move the fruit flies into the monitoring tube (one fruit fly per monitoring tube).\nInsert the monitoring tube containing the fruit fly into the monitoring board, and seal the non-food end with a perforated plastic plug (or cotton plug).\nAlign the middle of the monitoring tube (the part without food) at the infrared detector of the monitoring board, and fix the monitoring tube with rubber bands.\nSleep deprivation. See Figure 7[href=https://www.wicell.org#fig7]D and see troubleshooting 5[href=https://www.wicell.org#sec7.9] and 6[href=https://www.wicell.org#sec7.11]\nSet the temperature, humidity, and time parameters of the artificial climate box.\nPut and fix the monitoring boards in the oscillator which is inside the artificial climate box as described above.\nConnect the monitoring boards to the data collection system and set the data collection interval to 1 min.\nAccording to the experimental requirements, select the appropriate time point,\nTurn on the power of the oscillator and maintain it in a standby state.\nTurn on the power of the joint control module at the chosen time of the experimental requirement and the sleep deprivation experiment begins to perform.",
    "Note: Common experimental paradigms are as follows. The Zeitgeber time (ZT) was defined as ZT0 with lights on and ZT12 with lights off, so the flies are under a cycle of 12 h of light/12 h of darkness. The whole night deprivation is performed. Firstly, record the baseline of sleep behavior without oscillation. Then perform the sleep deprivation at ZT12 on the second day. Next, conduct the third day record of sleep behavior without oscillation to evaluate the sleep rebound.\nNote: There are multiple ways to analyze the data generated by sleep deprivation experiments. In some researches, the sleep rebound was calculated as the difference in sleep between the day after sleep deprivation and the day before the deprivation at each ZT time(Toda et al., 2019[href=https://www.wicell.org#bib17]) or each half hour (Sitaraman et al., 2015[href=https://www.wicell.org#bib15]). In some other researches, the Individual sleep rebound is quantified every hour for 24 h by dividing the cumulative amount of regained sleep by the total amount of sleep lost during deprivation (Tong et al., 2016[href=https://www.wicell.org#bib18]; Jin et al., 2021[href=https://www.wicell.org#bib7]). Here, the latter method was used to present the results of the sleep deprivation experiment."
  ],
  "subjectAreas": [
    "Bioinformatics",
    "Physics",
    "Computer Sciences",
    "Behavior",
    "Cognitive Neuroscience",
    "Neuroscience",
    "Model Organisms",
    "Biophysics"
  ],
  "bigAreas": [
    "Biomedical & Clinical Research",
    "Ecology & Environmental Biology",
    "Molecular Biology & Genetics",
    "Bioinformatics & Computational Biology"
  ]
}