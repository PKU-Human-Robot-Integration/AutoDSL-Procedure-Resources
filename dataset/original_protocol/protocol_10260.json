{
  "id": 10671,
  "origin_website": "Jove",
  "title": "Calculating Heart Rate Variability from ECG Data from Youth with Cerebral Palsy During Active Video Game Sessions",
  "procedures": [
    "Institutional Review Board approval was obtained. All youth provided written assent and parents provided consent prior to participation.\n1. AVG data collection sessions\nThe AVG game session\n\t\nIn this study, have youth with CP participate in an AVG session which is comprised of three 20 min games. See Table 5 for Youth Demographics. It was expected that a total of 30 games would be played; however, 29 games were completed because one subject only played 2 games in his AVG session.\nHave the subjects wear a HR monitor throughout the session to record HR and ECG responses.\nIn the AVG session, have youth play each AVG while seated on a bench with feet flat on the floor and knees and hips flexed to 90 degrees (90/90 sitting) for postural support and stability.\nUse the following three gaming conditions for collection objects: 1) hand icons only; 2) feet icons only; and 3) both hand and feet icons. Use a counterbalanced order between subjects. Choose these three conditions to determine which is more effective in promoting physical activity and fitness and not too demanding to cause early, undue fatigue.\n\t\tNOTE: Each game was designed using the phases of exercise prescription: warm-up, conditioning and cool-down. [Please see Table 1]. Additionally, there was a rest phase before game play began to document baseline HR and a recovery phase after game play to document time to return to baseline HR.\nAllow subjects a rest period between games for HR to return to baseline level.\nCalculating HRV from ECG Data",
    "Organize data into 5 min time intervals to ensure comparable data for each phase. Therefore, there were 6 phases defined for these calculations: 1) Rest; 2) Warm-up; 3) Conditioning 1 (first 5 min); 4) Conditioning 2 (second 5 min); 5) Cool-Down (5 min) and 6) Recovery. Dividing the conditioning phase into two 5 min phases allows examination of subject aerobic performance in shorter intervals to account for fatigue due to deconditioning 12 (Table 4).\nTo properly calculate HRV measures for each segment of a subject's session, perform R-peak detection on the raw ECG signal12,13. Use the raw signal to avoid manipulations that could skew the data.\nTo process the data, obtain the start times of each recording session and convert from 'datetime' variables (MM/DD/YYYY HH:MM:SS.SS) to seconds. None of the sessions occurred across two days which allowed the MM/DD/YYYY portion to be ignored during these calculations. Acquire the start time of the game of interest from the timing table to locate each game session within the electrocardiogram (ECG) file; this time was converted to seconds after it had been extracted from the timing file. The timing file contained start times for each phase of the game as well as the end of the recovery period (Table 2).\nCalculate the rest period as the 5 min prior to the game start and the Recovery Phase as the 5 min after the end of the Cooldown Phase. Once these times were obtained, obtain the location (S) of the game phase of interest within the ECG file through the following equation:\nimgsrc://cloudfront.jove.com/files/ftp_upload/59230/59230eq1.jpg  (1)",
    "where Phase is set to either Rest, Warmup, Conditioning 1, Conditioning 2, Cooldown, or Recovery; the time was divided by 1/Frequency to account for the ECG sample rate. The HR monitor had a sampling rate of 250 Hz and therefore contained a measure every 4 ms.\n\t\t\nChange this number by altering the sampling rate with the first prompt from the Peak_Detection.m program to account for the use of alternate recording devices. Choose which 5 min segment to work with while running the peak detection program. This was done via a prompt to the user. Set the end time to 5 min after the start time and take the frequency of the recording device into consideration.\nOnce the 5 min section had been chosen, calculate a threshold for peak-detection based upon the average and standard deviation of the waveform.\n\t\t\nSet the threshold as imgsrc://cloudfront.jove.com/files/ftp_upload/59230/59230eq2.jpgbut this can be increased in the program if the data are uniform to reduce false-positive detection from T peaks which are higher than their corresponding R peaks. Examples of these false positives can be seen in Figure 1.\nAlong with a minimum height for the R peak, assign a minimum distance between peaks to minimize the detection of incorrect peaks around the desired R. Set this value to 75 which corresponded to 0.3 s between peaks or 200 beats per min (bpm) (this value changes with frequency). The value of 200 bpm is higher than any HR achieved by the subjects in this study and can be changed based on the population being studied.",
    "Once the threshold was calculated, let the program run through the waveform and attempt to discern all the R's for RR interval and HRV calculations. Generate a preliminary plot so that the user could review it for irregularities such as those shown in Figure 1 or Figure 2.\n\t\t\nCorrect these irregularities manually by editing the Detection variable which contains the microvolt (µV) reading of the peak in column 1 and the location in the current game session (s/0.004) in the second column. In most cases the proper R peaks can easily be found by zooming into the problem location as seen in Figure 1. Many data sessions are fairly uniform as shown in Figure 3 and will therefore only require a few corrections. Some cases, however are fairly messy and require more time to review and obtain proper R locations.\nIf the fluctuations in the waveform make it excessively difficult to properly locate a peak, ignore small segments ~1-2 s and attribute to ectopic beats which are not used in HRV calculations12.\nAfter the R's have been located, run the HRV_Measures program. Calculate RR intervals first as they are the basis of the HRV measures used in this study12.\n\t\t\nObtain a matrix of intervals and ignore any interval greater than 1.5 s (40 bpm) as it was due to the aforementioned ectopic beats being removed from the calculations. Save these RR intervals for further calculations and verification of data. Use these intervals to calculate the Root Mean Square of the Successive Differences (RMSSD) with the following equation:\nimgsrc://cloudfront.jove.com/files/ftp_upload/59230/59230eq3.jpg RMSSD = (2)\n\t\t\tWhere N = Number of RR Intervals (R-R)i = Interval between neighboring QRS Peaks (R-R)i+1 = Interval between subsequent set of peaks",
    "Choose this variable as it has been shown to be efficacious on intervals ranging from 1 min to 24 h in length13,14,15,16,17 and can therefore be used to assess these 5 min intervals in the game phases. Along with RMSSD, obtain the Standard Deviation of NN intervals to measure changes in HR throughout the phase14,16,18.\nUse the RR intervals to calculate NN50, the number of intervals that differ from the previous interval by more than 50 ms12 which has also been used on intervals ranging from one min to 24 h16,17,19,20,21.\n\t\t\nCalculate the NN50 variable via a simple count function that checked whether or not the difference between consecutive RR interval lengths was greater than 50 ms. Once NN50 was obtained in this manner, divide by the total number of intervals to calculate pNN50 which is the percentage of intervals that differ by more than 50 ms. This calculation allowed the measured data to be compared across subjects, games, and even sessions of varying lengths as it is a unit-less variable13,14,16,17.\nCalculate mean RR interval length for each phase and subject as a separate HRV measure16,17,19,22,23,24. Use this measure to calculate Average HR by dividing the mean RR interval by 60 s. Both of these measures are easily comparable across game sessions to observe the trend of the subject's activity16,17,19,22,23,24.\nOnce these measures were calculated, calculate the Low Frequency and High Frequency Power Spectral Density (PSD) for both the raw ECG of the 5-min interval and the RR interval matrix by obtaining PSD from Fast-Fourier transforms13,14,17,19,25. All these data were then stored in a table, an example of which is shown in Table 4.\n2. Acquire ECG Data from the Patient\nPrepare the HR monitor chest strap and Bluetooth module for application to the subject.",
    "Ensure that the Bluetooth module has been fully charged (3 h) using the charge cradle.\nPlug the module into the data computer via the charge cradle and open the config tool. Enter a name for logging purposes.\nSelect the HR device, click the Time tab and select Set Date/Time to sync the module to the correct time and date. The device can now be removed from the charge cradle.\nMoisten the conductive areas (beige) on the HR monitor chest strap by placing a hand in water and rubbing the conductive areas.\nPlace the HR monitor Bluetooth module into the chest strap with the conductive surfaces of the module lined up with those of the chest strap: it will click into place.\nPress and hold the button on the module until the lights flash. The module is now on and recording.\nApply the HR monitor chest strap (with Bluetooth module) to the player with the module aligned with the left mid-axillary line and the strap just under the pectoral muscles. Once properly positioned, tighten the device so that it will not move during the session but is not uncomfortable for the player.\nAcquire a signal and view the live feed.\n\t\nPlug the connector into the USB port of computer that will be used to view the data.\nOpen the Live View program and enter Setup Mode by clicking the icon with the wrench and screwdriver.\nChoose a player from the list if appropriate or add a new subject with the New button in the bottom left corner of the screen.\nEnter Subject information as desired for identification purposes (name, age, gender, height, weight).\nClick on the Hardware tab and select the current subject.",
    "Click Assign in the bottom of the tab and select the current device (listed as 01 if no other devices are present). Then click assign in the pop-up box.\nClick on the Team tab. Highlight the subject and then click the right arrow button to place the player on Team A.\nClick on the Deployment tab and then move the newly created team to the first tab.\nOpen the Live Mode tab by clicking the blue Wi-Fi symbol in the top left corner.\nUse the Live Mode tab to monitor HR, respiratory rate, and posture of the subject in real time.\n\t\tNOTE: Signal strength, battery power, and confidence of the measures can also be viewed.\nRecord accurate timing (MM/DD/YYYY HH:MM:SS) of the start and end of each session and phase for processing.\nDownload the ECG Data from the HR monitor.\n\t\nRemove the strap from the player at the end of the session and remove the Bluetooth Module from the chest strap.\nPlace the module in the charge cradle and plug it into a computer with the software program installed.\nOpen the log.\nSelect the device from the dropdown menu. All sessions currently on the device are displayed with dates and times.\nUncheck the box that says Use Default Save Location and chose a new save location.\nClick Save. A progress bar will then appear. Saving may take up to an hour depending on the length of the session.\nRename the date, once it has been saved.\n3. Data Analysis and Calculation of Heart Rate Variability Measures\nPrepare files for processing .\n\t\nName ECG files as 'KOLLECT_Subject#_AVG4' (e.g., KOLLECT_01_AVG4.csv').\nGenerate a timing table in comma separated variable (.csv) format to draw timing data from during data processing. See Table 1 for an example of the correct format.",
    "Import the Date-time data from the .csv file and right click on the name of the newly created variable and change it to 'Timing.mat'.\nPreliminary R peak detection.\n\t\nOpen and run Peak _ Detection . m.\nEnter the frequency of ECG recording device when prompted by the program.\nEnter the player number for the data to be analyzed when prompted.\n\t\tNOTE: Some players did not complete active video game 4 (AVG4) and therefore only players 1-10 are used for this study. Other numbers will provide an error message.\nEnter the number of the game to be analyzed (1, 2, or 3) when prompted.\nEnter the phase to be analyzed (Rest, Warmup (WU), Conditioning (Con), Rest, or Recovery).\n\t\t\nEnter an offset in minutes if desired, or enter 0 for no offset.\nSelect the magnifying tool and select an area of the plot that is output to create a window with a width of approximately 2,000 (s/0.004) and a height that will show the full waveform as shown in Figure 3. Zoom in or out if the window is not easily inspected visually.\nVisually inspect the graph to evaluate if the peaks detected are correctly labeled. See Figure 1 for example of incorrectly detected and missed peaks caused by irregular ECG data (Figure 2).\nPeak Correction\n\t\nCorrect the incorrectly detected or missing peaks by locating the Detection variable and double clicking in the workspace.\nUtilize the Data Cursor tool on the plot of the ECG waveform to obtain the x and y coordinates of the incorrect peak; X (time*frequency) is the first column in Detection.mat and Y (Voltage) is the second column (Figure 3).\n\t\t\nRight click the text box that appears and click Select Cursor Update Function.",
    "Select TooltipUpdate.m from the folder containing the files used for this analysis. This will allow the tooltip to display more exact values.\nIf the point is a false positive, remove it from the array by clicking on its row in the Detection.mat variable and pressing Control and the Minus key. An example of false positive detection can be seen in Figure 3.\nEdit incorrectly marked peaks that are adjacent to unmarked peaks, as shown by the two T peaks marked as R in Figure 1, by changing their values to match that of the unmarked peak.\nObtain the value of the missed peak can be obtained with the Data Cursor tool.\nAdd additional rows to Detection. mat using control and the plus key for peaks missed due to low voltage levels.\nEnter the values in numerical order to avoid negative values during the calculation process (i.e., add the peak located at 11000 between the peaks at 10908 and 11167) (Figure 5).\nEnsure that values are entered correctly before continuing through the full session as numbers are occasionally clipped off when entered.\nRepeat step 2.3 until all peaks have been checked and/or corrected.\n\t\tNOTE: Some files have limited variability in waveform amplitude and are quicker to check, as seen in Figure 4 while others are more variable and may require closer zoom to accurately locate peaks during visual inspection.\nObtain HRV measure calculations.\n\t\nSave the original plot generated from Peak_Detection.m for later reference.\nRun HRV_Measures.m to generate the correctly labeled plot. A sample of corrected data is shown in Figure 6.\n\t\t\nChange the plot title by using Insert | Title on the plot window and changing it to the desired title.\nCheck the window for output, the program will notify the user of the location incorrectly entered data if any exists.",
    "Save the variable named interval.\nOpen the variable entitled HRV from the Workspace window to view Mean RR (ms), Average HR (bpm), RMSSD (ms), SDNN (ms), NN50 (count), pNN50 (%), low frequency (LF)/ high frequency (HF) (ECG), LF/HF RR, Low Frequency Power RR, and High Frequency Power (RR)). Save the h values of these variable to a table such as the one shown in Table 4.\nRepeat Sections 3.2 - 3.4 for all other segments, sessions, and subjects that need analysis.\nSubscription Required. Please recommend JoVE to your librarian."
  ],
  "subjectAreas": [
    "Behavior"
  ],
  "bigAreas": [
    "Ecology & Environmental Biology"
  ]
}