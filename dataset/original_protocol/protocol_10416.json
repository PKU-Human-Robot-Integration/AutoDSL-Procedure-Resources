{
  "id": 10827,
  "origin_website": "Jove",
  "title": "A Smartphone-Based Imaging Method for C. elegans Lawn Avoidance Assay",
  "procedures": [
    "1. Setting up the imaging apparatus (Figure 1A-E)\nEnsure that a smartphone camera with the following minimum requirements is available:\n\t12 megapixel (MP) camera\n\t1080p resolution video\n\t5 GB of storage space (20 min video is 3-4 Gb)\n\tTime-lapse video app from the application store (free applications available)\nPlace the LED light box on the bottom rack of the 25 °C incubator where the assay will take place.\nTo hide the dotted pattern on the LED light surface, spread two sheets of tissues to cover the entire surface of the LED box.\nMake an elevated stage for the specimen (Figure 1A,D). The elevated stage is a clear plastic sheet supported by hollow rectangular tunnels. Tunnels function like a condenser to focus light, providing better contrast to the specimen (Figure 1C). Ensure that the tunnel's walls are somewhat dark to minimize light scatter. This study used brown paper boxes. The dimension of the tunnel is 5.5 cm x 17 cm x 4.5 cm (W x L x H). The LED light box can fit up to five tunnels.\nPlace another rack above the stage to place the phones for recording (Figure 1B,E). Each phone will record three to six plates (one to two rows of three plates), so adjust the rack height accordingly. This will be approximately 15 cm above the specimen (Figure 1B).\nPut a power strip inside the incubator to plug in the phones during overnight recording.\n2. Preparation of buffers and media\nPrepare M9 buffer by adding 3 g of KH2PO4, 6 g of Na2HPO4, and 5 g of NaCl to 1 L of distilled H2O. Sterilize by autoclaving at 121 °C for 20 min. Cool the buffer and then add 1 mL of 1 M MgSO4.",
    "Prepare 1 M KPO4 buffer by adding 108.3 g of KH2PO4 and 35.6 g of K2HPO4 to 1 L of H2O. Adjust the pH to 6.0 by adding KOH. Sterilize by autoclaving.\nPrepare worm bleaching solution by mixing 1 mL of bleach, 0.4 mL of 1 M NaOH, and 2.6 mL of H2O.\nPrepare nematode growth media (NGM) agar plates.\n\t\nAdd 3 g of NaCl, 2.5 g of bacto peptone, and 17 g of bacto agar in a 3 L flask. Add 975 mL of distilled water and insert a stir bar.\nSterilize by autoclaving, then cool to 55 °C, and add 1 mL of cholesterol (5 mg/mL in ethanol), 1 mL of 1 M CaCl2, 1 mL of 1 M MgSO4, and 25 mL of 1 M KPO4 buffer (pH 6.0). Stir to mix well. Pour into 6 cm plates. Let the plates dry for at least 2 days.\nSeed NGM agar plates with OP50 E. coli by pipetting approximately 1 mL of an overnight culture of OP50 to form a lawn of bacteria. Leave at room temperature (RT) until ready to use.\n3. Preparation of high-peptone NGM plates (for PA14)\nNOTE: These plates should be made at least 5 days before the assay.\nMake NGM containing 0.35% peptone. Mix 0.3 g of NaCl, 0.35 g of bacto peptone, and 1.7 g of bacto agar in a 250 mL Erlenmeyer flask. Add 97.5 mL of distilled water and insert a stir bar.\nCover the mouth of the flask with aluminum foil and autoclave at 121 °C for 20 min.",
    "Cool down to 55 °C and add 0.1 mL of cholesterol (5 mg/mL in ethanol), 0.1 mL of 1 M CaCl2, 0.1 mL of 1 M MgSO4, and 2.5 mL of 1 M KPO4 buffer (pH 6.0). Stir to mix well.\nPour high-peptone NGM into 35 mm Petri dishes.\nDry the plates for at least 2 days.\n4. Synchronizing worms by bleaching\nNOTE: Start this step 3 days before the assay.\nTake plates with gravid adult worms and collect them into a 1.7 mL microtube by washing the plates with M9 buffer.\nRemove as much liquid as possible, then add 400 µL of bleaching solution. Wait about 4-5 min with intermittent vortexing, until the adult worm bodies break, releasing the eggs.\nAdd M9 buffer to fill the rest of the microtube to dilute the bleaching solution. Spin at maximum speed (12,000 to 13,000 x g) for 1-2 s. Remove the supernatant and wash three more times with M9 buffer.\nTransfer the eggs into an empty 35 mm Petri dish containing M9 buffer. Let the eggs hatch overnight at 20 °C. In the absence of food, hatched worms will arrest at the L1 larval stage, synchronizing the developmental stage of all worms.\n\tNOTE: Coating the 35 mm Petri dish with gelatin solution (0.05% gelatin in autoclaved water) can prevent the eggs from sticking to the bottom and minimize egg loss.\nThe next day, transfer L1 stage worms to OP50 seeded NGM plates.\nIncubate the worms at 20 °C for 53-54 h until the worms reach the L4 larval stage.\n5. Preparation of bacteria ( Pseudomonas aeruginosa, PA14)\nNOTE: Start this step 4 days before the assay.\nStreak thawed bacteria from -80 °C on a Luria Bertani (LB) agar plate without any antibiotic and incubate overnight at 37 °C.",
    "NOTE: Always use fresh bacteria. Streaked plates should be stored at 4 °C for no more than 1 week.\nInoculate a single colony into 3 mL of King's broth and grow overnight in a 37 °C shaking incubator.\nThe next day, seed 7 µL of the overnight culture onto the high-peptone NGM plates and incubate at 37 °C for 24 h.\nMove the seeded plates to RT and incubate for another 24 h before use. Once ready, use the plate within the next 24 h.\n6. Preparing to record\nNOTE: Do this right before the assay.\nPlug in the smartphone to the power strip connected to a power outlet. Make sure to disable the auto-lock setting to prevent the phone returning to the lock screen while recording.\nOpen the time-lapse camera app and set the time-lapse interval to 2 s. Set the video quality to 1080p at 30 fps.\nPlace the smartphone with the screen facing up to record with the back-facing camera. Check the screen to make sure that the paper box tunnels fit within the field of view.\n7. Lawn avoidance assay\nUsing a platinum wire pick, transfer 30 synchronized L4 stage worms (53-54 h from L1) to the PA14 plate. Place the worms in the middle of the bacteria lawn. For each condition in this study, two plates were tested (i.e., 60 worms per condition).\nPlace the two plates on the elevated stage of the recording apparatus with the lid facing down. The side with the agar will be facing up toward the camera.\nOn the smartphone screen, tap where the plate is, so the camera can focus on the assay plates. It helps to have a label or writing on the plate as the camera can use that to focus correctly.",
    "NOTE: Writing on the bottom of the plates does not interfere with the imaging of worms as long as it is toward the edge. Fortunately, worms stay near the lawn even after they leave, so an unobstructed view is only needed of the immediate area surrounding the lawn.\nStart the recording.\nOnce the recording has started, add more plates to the stage. There may be a significant lag time between the plates due to the time it takes to transfer worms by picking. Note the lag time afterward so that each condition can be counted at the time it began.\nRecord for 20 h from the last set of plates placed on the stage. In the final time-lapse video, 20 h of recording will result in a 20 min long video.\n\tNOTE: It may be worthwhile to count the worms directly from the plates after the assay, at least at the beginning for the first few occasions. This can be compared against values obtained through video imaging to ensure they yield similar numbers.\n8. Processing of video using Python script\nTransfer the movie file to a computer for processing. The extension will be a MOV (iPhone) or MP4 file (Android).\nUse a Python code to process the videos. The code can be found at github.com/khyoon201/wormavoid.\nTo run the Python scripts, ensure that the following are preinstalled on the computer: ffmpeg, a tool for converting video files (directions for installation can be found on its website, ffmpeg.org/download), and the Python packages os, pandas, tkinter, and ffmpeg-python.\nFind the dimensions and coordinates of each plate using the extract_frame.py script.",
    "Run the extract_frame.py script. A window will appear to select the video file stored on the computer. After running is completed, a jpeg file with the same name will appear in the same directory.\nOpen the jpeg file in ImageJ (imagej.org).\nFrom the menu, choose Analyze > Set Measurements. Ensure that the Display Label box is checked (Figure 2A). Close the window.\nUsing the Straight Line tool, measure the diameter of a plate by drawing a line across it, then choosing Analyze > Measure from the menu. If the video is in 1080p, each plate will be about 480 pixels wide. Write this information down and close the Results window.\nUsing the Multi-point tool, mark points on the upper left side of each plate. These points will become the upper left corner of the cropped videos (Figure 2B). The order matters; mark in order of when the plates were started. After creating a point for all the plates, choose Analyze > Measure from the menu. Measurements, including the X and Y coordinates of the points, will appear in the Results window.\nTo process multiple videos, repeat the process in ImageJ with other jpeg files. All X and Y coordinates will be listed in the same Results window.\nSave the Results window into a csv file. The file should be saved to the same directory as the movie files.\nFind the starting time for each plate.\n\t\nPlay the movie, either on the computer or phone, and take note of the starting times of each set of plates placed under the camera.\nOpen the Results.csv file with the coordinates and add a \"start\" column. For each row corresponding to individual plates, enter the appropriate start time, in seconds, under the \"start\" column (e.g., if the start time is 0:00:08, enter 8). Save.",
    "NOTE: The column name must be \"start\" (in lower case, without quotation marks) to be recognized by the next script for cropping and trimming.\nCrop and trim the videos.\n\t\nRun the crop_n_trim.py script.\nWhen prompted, choose the Results.csv file.\n\t\tNOTE: Make sure the Results.csv file and all the movie files are in the same directory.\nEnter the plate dimensions. Enter the pixel value noted earlier.\n\t\t​NOTE: The script will now read each row of the Results.csv file to find the correct movie file by reading the file name in the \"label\" column, and crop according to the coordinates indicated in columns \"X\" and \"Y\". The start time of each plate will be determined by the time indicated in the \"start\" column. After the script finishes running, a folder will appear with the same name as the movie, followed by the start time (e.g., \"Movie1_8\"), in which 10 s videos corresponding to each hourly time point of the assay will be saved.\n9. Manual counting using ImageJ\nOpen each AVI file in ImageJ.\nCount the worms that are visible outside the lawn. Worms that are overlapped in one frame usually move apart in another frame so that they can be counted correctly.\nCalculate the occupancy rate for each time point:\nOccupancy rate = (total worms - number of worms outside the lawn)/total worms\n\tNOTE: The worms will move in and out of the lawn during the video, but this will not significantly alter the results. Try to go with the number that seems to be the average, or the number of worms at the exact hourly time point (5 s into the video).\nSubscription Required. Please recommend JoVE to your librarian."
  ],
  "subjectAreas": [
    "Behavior"
  ],
  "bigAreas": [
    "Ecology & Environmental Biology"
  ]
}