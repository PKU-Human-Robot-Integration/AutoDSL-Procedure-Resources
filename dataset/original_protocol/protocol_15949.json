{
  "id": 19779,
  "origin_website": "Wiley",
  "title": "The AD Knowledge Portal: A Repository for Multi-Omic Data on Alzheimer's Disease and Aging",
  "procedures": [
    "In this example, we will demonstrate how to select and download processed genomic variant, RNA-seq, and associated metadata files from the Mayo Clinic AD Cerebral Amyloid Angiopathy Study (MC-CAA; (https://adknowledgeportal.synapse.org/Explore/Studies/DetailsPage?Study_Name=MC-CAA[href=https://adknowledgeportal.synapse.org/Explore/Studies/DetailsPage?Study_Name=MC-CAA]), which was generated as part of the M2OVE-AD program.\nMaterials\nHardware\nComputer with Internet connection\nSoftware\nUp-to-date web browser, such as Chrome, Firefox, or Safari\n1. Visit the AD Knowledge Portal by navigating to https://adknowledgeportal.synapse.org[href=https://adknowledgeportal.synapse.org] (Fig. 1[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0001]).\nThe protocol steps and screenshots in this article refer to Site Version 1.4.17.\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/ae7229b9-95d6-4e22-b5f0-70c386bc4404/cphg105-fig-0001-m.jpg</p>\nFigure 1\nScreenshot of AD Knowledge Portal homepage, found at http://adknowledgeportal.synpase.org/[href=http://adknowledgeportal.synpase.org/].\n2. In the navigation bar at the top, click on Explore/Data. This will take you to a new webpage, https://adknowledgeportal.synapse.org/Explore/Data[href=https://adknowledgeportal.synapse.org/Explore/Data], which shows a Data Table listing all files within the AD Knowledge Portal along with metadata for each file (Fig. 2[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0002]).\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/cd64e61f-65b0-4f28-bcec-6d14347c7698/cphg105-fig-0002-m.jpg</p>\nFigure 2\nScreenshot of the Data Table, found at http://adknowledgeportal.synpase.org/Explore/Data[href=http://adknowledgeportal.synpase.org/Explore/Data].\n3. Search for files associated with a study of interest. Use the magnifying glass icon in the Explore Data Toolbar located above the pie charts to bring up the Search box (Fig. 3[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0003]). Ensure that the Study facet is selected in the Search in Field list below the Search box. Type the value “MC-CAA” into the Search box and hit the Return or Enter button on your keyboard. This will update the Data Table to show only files from the MC-CAA study (Fig. 4[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0004]).",
    "The Explore Data section presents several ways to select data files of interest. The top of the page displays pie charts that summarize the number of files based on file annotations of interest, including Study, Data Type, Assay, Organism, and Tissue, among others. Selection of one of these chart segments will filter the table below to select just that set of files. Access a full list of values for a specific annotation by clicking the funnel-shaped Filter icon in the Chart toolbar. Alternatively, access the filters using the facet selection boxes to the left of the Data Table.\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/3d5e2f94-392d-450a-8168-998146f53ff1/cphg105-fig-0003-m.jpg</p>\nFigure 3\nScreenshot of the Explore Data Search box, revealed by clicking on the magnifying glass icon.\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/c8dabe1e-bd80-40ee-81f4-be07c89c1aec/cphg105-fig-0004-m.jpg</p>\nFigure 4\nScreenshot of the Data Table after applying the “MC-CAA” Study filter.\n4. Learn more about the selected study. Within the Data Table, click the “MC-CAA” link in the Study column. This will take you to a Study Details page (https://adknowledgeportal.synapse.org/Explore/Studies/DetailsPage?Study_Name=MC-CAA[href=https://adknowledgeportal.synapse.org/Explore/Studies/DetailsPage?Study_Name=MC-CAA]), which presents information about the study goals, subject selection criteria, and methodological details of the biological assays used. The Study Details pages also display lists of metadata and data associated with the study (Fig. 5[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0005]).\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/f5b0ffa9-e8e8-4879-bab9-eaa737dc1563/cphg105-fig-0005-m.jpg</p>\nFigure 5\nScreenshot of the MC-CAA Study Detail page, found at http://adknowledgeportal.synapse.org/Explore/Studies/DetailsPage?Study_Name=MC-CAA[href=http://adknowledgeportal.synapse.org/Explore/Studies/DetailsPage?Study_Name=MC-CAA].\n5. Log in or create an account to get access to files. Returning to the Data Table, examine the Access column on the left. Logged-in users should see View Terms next to a green open lock icon. New users will see a yellow lock icon with a Request Access message. Click on Request Access to bring up a dialog box with a list of steps needed to get access to the file of interest (Fig. 6[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0006]).",
    "Register for an account or log in to access data. Data in the AD Knowledge Portal are hosted in the data repository, Synapse (https://www.synapse.org[href=https://www.synapse.org]). Initiate the account creation process by clicking on “Sign in with a Sage Platform (Synapse) user account.” This will take you to a registration page within Synapse. Enter your e-mail address and click “Send registration info.”\nSynapse also supports login using a Google account. Visit the Synapse docs site to learn more: https://docs.synapse.org/articles/user_profiles.html#adding-google-email-addresses-to-enable-sso[href=https://docs.synapse.org/articles/user_profiles.html#adding-google-email-addresses-to-enable-sso].\nCheck your e-mail and follow the steps in the e-mail sent from [email protected][href=https://currentprotocols.onlinelibrary.wiley.com/cdn-cgi/l/email-protection] to create your account.\nFor controlled data from human subjects, you will need to apply to get access to controlled data. Complete and submit the Data Use Certificate (DUC) following the instructions to Request Access.\nAgree to the AD Knowledge Portal Data Use Terms by reading the statement that describes how to acknowledge data in the Portal and clicking I Accept Terms of Use.\nOnce you have access, log in to the site and proceed with the following steps.\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/b967c3b5-617a-4f89-8ddb-a03b5d93758a/cphg105-fig-0006-m.jpg</p>\nFigure 6\nScreenshot of Access Request dialog box, revealed after clicking on Request Access in the Data Table.\n6. Use additional filters to select specific files of interest. Using the facet list on the left of the Data Table, locate the Data Subtype facet (Fig. 7[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0007]). Check the value “processed.”",
    "Data Subtype (also referred to as dataSubtype) is a file annotation that indicates if data in the file are raw, processed, or normalized, or if the file contains metadata (see Basic Protocol 3[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0003] for more information about working with metadata). In this example, we are selecting processed RNA-seq gene count matrices and genomic variant PLINK files. While beginning analysis with unmanipulated gene counts (as designated by the “processed” annotation) is often preferred, you may instead check the value “normalized” to find the RNA-seq gene counts normalized by conditional quantile normalization (CQN).\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/b0fb63d5-b12d-4655-afa9-f3c1066356d5/cphg105-fig-0007-m.jpg</p>\nFigure 7\nScreenshot of the Data Subtype and Metadata Type facet selection boxes, two of the facets that can be found to the left of the Data Table.\n7. Select the metadata files associated with the MC-CAA study. Using the facet list on the left of the Data Table, locate the Data Subtype facet (Fig. 7[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0007]). Check the value “metadata” to add these to the Data Table. The Data Table will now contain both “processed” and “metadata” files.\n8. Add selected files from the Data Table to the Download List. Using the Explore Data Page toolbar above the Pie Charts, click on the Download Icon (Fig. 8[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0008]).\n         \nFrom the drop-down menu, select Add to Download List. This will bring up a new notification bar that reports the number and size of files you have selected.\nSelect the Add button on the right of the notification bar to add these files to the Download List.\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/b28c7405-b117-4fc0-80bd-3b73fed650f0/cphg105-fig-0008-m.jpg</p>\nFigure 8\nScreenshot of the download menu found within the Explore Data Page toolbar. Three possible options are: Export Table, Add to Download List, or Programmatic Options.",
    "9. Download files. Access the download list by selecting View Download List from the notification bar, or by clicking the Download List icon at the top of the site (Fig. 9[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0009]).\n         \nEnter a name for your package in the PackageFileName text box.\nClick the Create Package button on the bottom right of the Download List.\nAfter the package has been created, the notification bar will be updated. Click Download Package to download a zip file to your computer.\nBefore downloading any data onto your computer, ensure that your work environment is secure and that you understand how to manage data that may contain private health information (PHI). Note that there is a limitation on the number and size of files that can be downloaded through the web; see Basic Protocol 2[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0002] for programmatic download options.\n<p>imgsrc:https://currentprotocols.onlinelibrary.wiley.com/cms/asset/72b64e79-594d-4200-8725-38ac451d6504/cphg105-fig-0009-m.jpg</p>\nFigure 9\nScreenshot of Explore Data Page after adding files to the Download List; two ways to access the Download List are depicted.\n10. Download file annotations, which are required for interpreting the data files. The utility of file annotations is explained in more detail in Basic Protocol 3[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0003]. Using the menu bar above the Pie Charts, click on the Download Icon (Fig. 8[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0008]).\n         \nFrom the drop-down menu, select Export Table. This will bring up a new dialog box. Customize the file type and contents using the selections and checkboxes.\nClick Next to generate the file. This will bring up a new dialog box that indicates the file is ready for download.\nClick Download to download the file to your computer. The resulting file contains a list of file identifiers along with file annotations.",
    "An alternative to downloading files through the web is the use of programmatic clients that directly access files in the Portal's underlying data store, Synapse. Programmatic clients include command line, R, and Python. Using programmatic clients is more efficient for downloading a large number of files or downloading files of a large size. Using programmatic clients also promotes reproducibility by recording which data were used for analysis. The Synapse command line client synapseclient can be used to download all data and file annotations from the portal with a single command. This protocol can be used instead of steps 6-9 in Basic Protocol 1[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0001].\nAn important consideration when determining which Synapse programmatic client to use to download data is download speed. The command line and Python synapseclient support multithreaded download, and will provide faster download speeds than the Synapse R client. Here, we detail how to use the command line client. To use Python or R clients, follow the steps outlined in the Synapse documentation: https://docs.synapse.org/articles/tutorial-download-data-portal.html[href=https://docs.synapse.org/articles/tutorial-download-data-portal.html]\nMaterials\nHardware\nComputer with Internet connection and sufficient privileges to install additional software\nSoftware\nUp-to-date web browser, such as Chrome, Firefox, or Safari\nPython 3 (https://www.python.org/downloads/[href=https://www.python.org/downloads/])\nsynapseclient package version 2.2 or higher\n1. Install Python 3 (https://www.python.org/downloads/[href=https://www.python.org/downloads/]). The command line synapseclient is installed with the Synapse Python client; therefore, Python 3 is required to install the synapseclient package.\n2. Install the synapseclient package by following the steps outlined in the Synapse documentation: http://python-docs.synapse.org/build/html/index.html#installation[href=http://python-docs.synapse.org/build/html/index.html#installation].",
    "3. Login to Synapse by following the steps outlined in the documentation: https://python-docs.synapse.org/build/html/CommandLineClient.html#login[href=https://python-docs.synapse.org/build/html/CommandLineClient.html#login]. If working on your personal computer, you may store your credentials locally by including the --rememberMe argument to allow automatic authentication with future Synapse interactions. This is recommended to prevent a case where you might accidentally share your password while sharing analytical code. In almost all cases, your Synapse API key is more secure than your password, and is recommended to be used to login. Find your API key in your user Profile: https://docs.synapse.org/articles/user_profiles.html#api-key[href=https://docs.synapse.org/articles/user_profiles.html#api-key].\n         \nsynapse login -u <Synapse username> -p <API key> --rememberMe\n4. From Explore Data in the portal, select the Download Options icon and Programmatic Options to visualize the command to download the data subset (see Fig. 8[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-fig-0008]).\n5. The command synapse get with the -q argument downloads files from the entirety of the portal data that meet the specified condition. See the synapse get documentation for more detail: https://python-docs.synapse.org/build/html/CommandLineClient.html#get[href=https://python-docs.synapse.org/build/html/CommandLineClient.html#get]. In this example, all “processed” and “metadata” files from the “MC-CAA” study are downloaded. Execute the following command from the directory where you would like to store the files.\n         \nsynapse get -q \"SELECT * FROM syn11346063 WHERE ((\"study\" = 'MC-CAA') AND (\"dataSubtype\" = 'processed' OR \"dataSubtype\" = 'metadata'))\"\n6. Also, in your working directory, you will find a SYNAPSE_TABLE_QUERY_###.csv file that lists the annotations associated with each downloaded file. This is the same information that can be obtained through the web interface using Export Table (Basic Protocol 1[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0001], step 10). Here, you will find helpful experimental details relevant to how the data were processed. Additionally, you will find important details about the file itself including the file version number.",
    "File metadata in the form of annotations provide critical information about the data in the AD Knowledge portal. Annotations describe content within the files, including type of data and assay, tissue of origin, source study, and ID of the source individual. Metadata conform to a structured schema to ensure that the data are searchable and standardized across studies and programs. The standards for defining, managing, and implementing controlled vocabularies for content in Synapse are available in the synapseAnnotations Github repository (https://github.com/Sage-Bionetworks/synapseAnnotations[href=https://github.com/Sage-Bionetworks/synapseAnnotations]).\nWhile a subset of metadata is stored as annotations on the file, the complete metadata are stored within a set of comma-separated values (CSV) files. The complete metadata expand on the annotation set with extra details about the individuals, specimens (or biosamples) from the individuals, and the assay performed on the specimens. There are typically several metadata CSV files required to fully represent the details of a single individual, specimen, or assay. These can be combined with the file annotations to get the complete details about the file. The individual metadata file describes each individual in the study. Each row corresponds to a unique individual identifiable by the key individualID. The biospecimen metadata file describes the specimens that were collected, and includes metadata such as tissue type, cell type, or nucleic acid source. While each row corresponds to a unique specimen identified by the key specimenID, there may be multiple specimens per individual. The biospecimen file also contains the key individualID; thus, the individual metadata file can be joined on this key. The assay metadata file contains experimental processing details such as technology used, batch processing, quality control metrics, and the key specimenID. If specimens or individuals were characterized across several assay types, there may be more than one assay metadata file.",
    "In short, metadata files of the individual, biospecimen, and assay type can be joined together on the keys individualID and specimenID. This protocol demonstrates how to use R software to join multiple files.\nMaterials\nHardware\nComputer with Internet connection\nSoftware\nUp-to-date web browser, such as Chrome, Firefox, or Safari\nR software (R Core Team, 2020[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-bib-0003])\ntidyverse package for R (Wickham et al., 2019[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-bib-0004])\n1. Ensure that you have the metadata files using steps 7-10 in Basic Protocol 1[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0001] or step 5 in Basic Protocol 2[href=https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cphg.105#cphg105-prot-0002].\n2. Install and load the tidyverse package in R to perform data frame manipulations.\n         \ninstall.packages(\"tidyverse\")\nlibrary(tidyverse)\n3. While reading in each metadata file with read_csv, specify the column types as character with “c”. Consistent column types ensure that common variables can be joined. This code joins data frames using all variables in common across the individual, biospecimen, and assay metadata files. A right_join preserves only the individuals and biospecimens that are characterized in each assay type: RNA-seq and SNP array.\n         \nindividual <- read_csv(\"MC-CAA_individual_human_metadata.csv\",\n  col_types = cols(.default = \"c\")\n)\nbiospecimen <- read_csv(\"MC-CAA_biospecimen_metadata.csv\",\n  col_types = cols(.default = \"c\")\n)\nrnaseq_assay <- read_csv(\"MC-CAA_assay_RNAseq_metadata.csv\",\n  col_types = cols(.default = \"c\")\n)\nsnparray_assay <- read_csv(\"MC-CAA_assay_snpArray_metadata.csv\",\n  col_types = cols(.default = \"c\")\n)\nRNASeq <- reduce(\n  list(individual, biospecimen, rnaseq_assay),\n  right_join\n)\nsnpArray <- reduce(\n  list(individual, biospecimen, snparray_assay),\n  right_join\n)"
  ],
  "subjectAreas": [
    "Human Genetics"
  ],
  "bigAreas": [
    "Molecular Biology & Genetics"
  ]
}