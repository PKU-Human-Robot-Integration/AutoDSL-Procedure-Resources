{
  "id": 19425,
  "origin_website": "Jove",
  "title": "Automated Multimodal Stimulation and Simultaneous Neuronal Recording from Multiple Small Organisms",
  "procedures": [
    "1. Neural imaging equipment\nNOTE: See Lawler and Albrecht15 for detailed instructions on building the imaging and stimulation system, which controls the microscope illumination timing, image acquisition, and stimulus delivery (Figure 1). An inexpensive Arduino Nano stimulus controller actuates the fluidic valves through digital signals to a valve controller and controls the optogenetic illumination through analog voltage signals to an LED controller. Other stimuli, such as vibration motors and thermal heaters, can be controlled using digital or analog signals. The stimulus controller synchronizes the stimulation and image recording via camera signals, as specified by the open-source Micro-Manager microscope control software (µManager)16. See the Table of Materials for details related to all the materials, reagents, equipment, and organisms used in this protocol.\nSet up the neural imaging equipment, including an epifluorescence microscope with GFP optics, an sCMOS camera with a digital exposure output signal, and a stimulus controller15.\nConnect the stimulus controller to the desired systems via digital or analog signals. For the examples presented below, the following systems are used:\n\t\nUse a valve controller for chemical stimulation. Connect the valve controller to fluidic solenoid or pinch valves (Figure 1)15.\nUse a 615 nm red LED and controller for optogenetic stimulation, mounted above the microscope stage.\nSet up the computer with the microscope control software, create a Configuration Preset with equipment settings, and ensure proper operation of the stimulus control15.\n2. Microfluidic device fabrication\nNOTE: See Lagoy et al.17 for detailed information about obtaining or fabricating the master molds and the production, use, and cleaning of the microfluidic devices. These steps are summarized below.\nObtain or fabricate a master mold using the microfluidic design file provided (albrechtlab.github.io/microfluidics)17. For young adult C. elegans, ensure that the channel height is 55-70 µm.",
    "Combine the PDMS base and curing agent at a 10:1 ratio by weight and mix thoroughly with transfer pipettes.\nDegas for 30-60 min in a vacuum desiccator until the bubbles disappear.\nPlace the master mold into a large (150 mm diameter) Petri dish, and pour the degassed PDMS up to a depth of 4-5 mm (~100 g). Inspect and remove any dust or bubbles with a transfer pipette.\nBake at 65 °C on a level oven shelf for 3 h to overnight.\nOnce cured, use a scalpel to cut the PDMS from the mold and a straight razor blade to separate the devices.\nPunch inlet and outlet holes using a 1 mm dermal punch, and clean them with dH2O, ethanol, and again with dH2O. Dry the device in an airstream (see Figure 2A).\nClean both sides of the PDMS device with adhesive tape, removing any dust or debris.\nPrepare the glass slides to complete the microfluidic device as described17. Drill inlet holes in the top slide using a diamond bit, and render the bottom slide hydrophobic by exposure to TFOCS vapors or by applying water-repellant glass treatment (Figure 2B).\nAssemble the glass-PDMS device sandwich into a clamp (Figure 2C).\n3. Animal preparation\nObtain or create animals with genetically encoded calcium indicators expressed in the neurons of interest.\n\tNOTE: For example, line NZ1091 (kyIs587 [gpa-6p::GCaMP2.2b; unc-122p::dsRed]; kyIs5662 [odr-7p::Chrimson:SL2:mCherry; elt-2p::mCherry]) expresses GCaMP and the red light-sensitive cation channel Chrimson in the AWA sensory neuron pair6. Both transgenes are integrated into the genome for stable expression in every animal.",
    "One day before experimentation, place at least 20 L4 larval stage C. elegans per experiment onto a nematode growth medium (NGM) agar plate seeded with an OP50 E. coli lawn. When maintained at 20 °C, this will synchronize the wild-type animals at the young adult stage the next day.\n\tNOTE: For array transgenes, pick animals using a fluorescence stereoscope to ensure transgene expression in the chosen animals.\n4. Solution preparation\nPrepare 1x S Basal buffer (100 mM NaCl and 0.05 M KPO4, pH 6.0) from a 10x stock solution.\nPrepare 1 mM tetramisole buffer by diluting 1 M stock in 1x S Basal. Use this paralytic buffer to prepare all the stimuli. An experiment typically uses about 150 mL.\nAdd 0.1-1 µg/mL fluorescein to the \"control\" buffer reservoirs to visualize the flow.\nCreate stimulus solutions by serial dilution to the desired final concentration. For example, create a 10−7 dilution of diacetyl attractant by first creating a 10−3 stock.\n\tNOTE: A small amount of fluorescein (0.1–1 µg/mL) may be added to the stimulus or buffer solution to verify stimulus timing, but concentration should be minimal to avoid artifacts in neural fluorescence.\n5. Microfluidic device preparation\nNOTE: See Reilly et al.9 for a video protocol showing the reservoir generation, device setup, and the loading of the animals. See also Lagoy et al.17 for a written protocol including many helpful tips.\nPrepare three or more fluid reservoirs. For each, attach a 30 mL or 60 mL syringe reservoir, a 3 mL priming syringe, and a needle stub to a three-way Luer valve (Figure 2D). Connect the needle to microbore tubing fitted with a metal tube at the end. Label the reservoirs, mount them onto a rack attached to a ring stand, and fill them with the corresponding buffer or stimulus fluids (Figure 2E).",
    "Degas the assembled microfluidic device in a vacuum desiccator for ~1 h.\nFill and remove the air bubbles from the reservoir tubing using the priming syringe. Fill the outflow tubing with buffer.\nRemove the microfluidic device from the vacuum, and quickly insert the outlet tubing and inject the fluid through the device until a droplet emerges from one inlet.\nAt this inlet, use a \"drop-to-drop\" connection17 to insert the corresponding fluidic inlet tube (Figure 2F). Ensure that liquid drops are present on both the inlet tubing and the device port hole to avoid introducing a bubble.\nInject more fluid from the outlet, connect the next inlet tube, and repeat until all the inlets are filled. Insert a solid blocking pin at any unused inlets and the worm loading port.\nInitiate flow by opening the inlet and outlet Luer valves. Inspect the device for leaks at the inlets and glass base. Inspect the device for any bubbles within the flow channels or inlets using the microscope image capture software in live mode.\n\t​NOTE: If bubbles are present, wait for them to absorb into the PDMS material.\n6. Animal loading\nNOTE: See Lagoy et al.17.\nTransfer young adult animals onto an unseeded NGM agar plate using a wire-tipped \"pick\".\nFlood the plate with approximately 5 mL of 1x S Basal buffer such that the animals are swimming.\nDraw the worms into a loading syringe (1 mL or 3 mL syringe with attached tubing that has been prefilled with 1x S Basal).\n\t\nUsing a stereoscope, move the tubing end below the liquid surface with one hand to each desired animal, and draw it into the tubing using the syringe held in the other hand.\nDraw the worms only into the tubing, not into the syringe.",
    "NOTE: The tubing typically holds only about 100 µL. The animals can be expelled into a local area and then drawn again into the tubing with a small volume.\nClose the outlet line, remove the worm loading pin, and connect the worm loading syringe to the device using a drop-to-drop connection.\nGently flow the animals into the arena, establish buffer flow, and allow up to 1 h for immobilization by tetramisole.\n\t​NOTE: During the immobilization period, ensure that only buffer fluid enters the arena. The stimulus and control reservoirs can be turned off during this period but open them and verify the correct flow before running the stimulation trials.\n7. Automated stimulation and neuronal recording\nCreate a stimulus definition text file called \"User Defined Acquisition Settings.txt\" with a text editor (e.g., Notepad) containing the stimulation settings for the automated image acquisition (see examples in Figure 3). The settings are divided into two sections:\n\t\nMicroscope acquisition settings: Define the experiment type (Single-Stimulus or Multi-Pattern), exposure and excitation timing, trial duration and intervals, and save directory.\nStimulation settings: Define the stimulus control parameters. A \"stimulation command\" specifies the actions occurring at certain video frames with the syntax <letter code><frame number>, where the letter codes are A = valve1, B = valve2, C = valve3, L = LED light; additionally, uppercase = on and lowercase = off. The LED intensity is set with the letter code \"i\" and a value of 0 (off) to 255 (maximum brightness).\n\t\tNOTE: The LED intensity value from 0 to 255 sets the output analog voltage from 0 V to 5 V. The current controller used here has a linear intensity scaling, and others should be calibrated with a light power meter.\n\t\t\nFor a Single-Stimulus experiment with only one repeated stimulation command, use the format in Figure 3A.",
    "For a Multi-Pattern experiment with multiple stimulation commands, use the format in Figure 3B. Include a \"Pattern Sequence\" of digits that represents the order of the stimulus patterns. For each pattern, enter a stimulation command on a separate line.\n\t\t\tNOTE: A pseudorandom sequence or m-sequence can be useful to investigate stimulus history dependence.\nRun the microscope control software. Verify that all the fluidic inlets are open, the flow is as desired within the arena (see Figure 2H), and the neurons of interest are in focus within the live window.\nClose the live window and run the script \"MultiPattern_RunScript.bsh\" within the software.\n\tNOTE: It is useful to run a test experiment without animals to verify proper flow and stimulation. Substituting a different fluorescein concentration for each stimulus fluid can help visualize and document new stimulus patterns.\nAfter experimentation, disassemble the microfluidic device, and rinse all the surfaces, tubing, and reservoirs with water.\n\t​NOTE: All the components can be reused dozens of times if kept clean. Ensure that reservoirs, tubing, and microfluidic devices are maintained wet or fully dried in an air stream to avoid salt crystallization, which can clog and is difficult to remove. The devices can be kept in ethanol to sterilize but should be fully dried before reuse (>1 h at 65 °C)17.\n8. Data analysis using NeuroTracker\nNOTE: NeuroTracker4,18,19 is an ImageJ/FIJI20 software plugin for tracking the fluorescence intensity of multiple neurons and animals, even as they move during trials. This plugin saves data as text files with each neuron's position and background-corrected fluorescence intensity (F). The fluorescence data are normalized to the baseline fluorescence (F0), for example, the average of several seconds prior to stimulation, as ΔF/F0 = (F -F0)/F0, which can be averaged across populations.\nInstall NeuroTracker scripts as instructed (github.com/albrechtLab/Neurotracker).",
    "Run NeuroTracker by clicking on Plugins | Tracking | NeuroTracker.\nSelect the folder containing the .TIF video files to be tracked, and select the desired settings.\n\tNOTE: If only a subset of the video files are to be tracked, select the numerical range of the files to analyze at the prompt. Default tracking settings are appropriate for nonmotile animals at 250 pix/mm resolution. Adjust the parameters proportionally for other resolutions. See the User Guide19 for further settings information.\nSet the intensity threshold such that the neurons are visible for selection (Figure 4).\nOpen the Brightness/Contrast (B/C) and Threshold control windows using the Image | Adjust menu.\nIn the B/C window, adjust the Minimum and Maximum sliders until the neurons are clearly distinguishable (Figure 4A).\nIn the Threshold window, check Dark background and Don't Reset Range.\nSlide the frame slider to observe the neuron movement and intensity changes, noting any animals to exclude from tracking, such as due to overlap with other animals.\nIdentify the neurons for tracking.\nFor each animal, adjust the threshold level such that the red threshold area above the neuron is visible in every frame before, during, and after stimulation.\nClick on the neuron to record its position and threshold level.\nRepeat the threshold adjustment and selection for each animal and neuron to track. See Figure 4C for a good threshold level example and Figure 4D,E for over-threshold and under-threshold examples. Previously selected neurons are indicated by a small box.\nWhen all the neurons are selected, press the spacebar to begin tracking.\n\tNOTE: For additional NeuroTracker examples, see previous references4,19.\nMonitor the tracking process for each animal, and make any necessary corrections.\nIf NeuroTracker pauses, it has lost the neuron. Reclick on the neuron, adjusting the threshold level as needed.",
    "If the integration box jumps to another nearby animal or non-neuronal structure, press the spacebar to pause, move the slider back to the first erroneous frame, and reclick on the correct neuron location.\n9. Data exploration and visualization\nNOTE: The MATLAB analysis script is used for data processing and visualization and to generate summary PDFs for each analysis.\nRun the \"NeuroTrackerSummary_pdf.m\" file in MATLAB, and select the folder containing the NeuroTracker data text files.\nWait for a summary PDF to be produced, allowing the verification of the tracking process (Figure 5). Animals are identified by a number (Figure 5A), and the neural responses from each animal and trial can be viewed to assess the population variability (Figure 5B).\nUse the function \"databrowse.m\" to explore the neural data, for example, grouping by trial number (Figure 5C), by animal number (Figure 5D), by stimulation pattern, or by another category.\nSubscription Required. Please recommend JoVE to your librarian."
  ],
  "subjectAreas": [
    "Neuroscience"
  ],
  "bigAreas": [
    "Biomedical & Clinical Research"
  ]
}